{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/views/components/FileUploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/views/components/FileUploader.vue","mtime":1702471674900},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTcGFya01ENSBmcm9tICJzcGFyay1tZDUiOwppbXBvcnQgeyBnZXRNdWx0aXBhcnRVcGxvYWQsIGdldFVwRmlsZSB9IGZyb20gIkAvcmVxdWVzdC9maWxlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsZVVwbG9hZGVyIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3B0aW9uczogewogICAgICAgIC8vIOebruagh+S4iuS8oCBVUkzvvIzlj6/ku6XmmK/lrZfnrKbkuLLkuZ/lj6/ku6XmmK/lh73mlbDvvIzlpoLmnpzmmK/lh73mlbDnmoTor53vvIzliJnkvJrkvKDlhaUgVXBsb2FkZXIuRmlsZSDlrp7kvovjgIEKICAgICAgICAvLyDlvZPliY3lnZcgVXBsb2FkZXIuQ2h1bmsg5Lul5Y+K5piv5ZCm5piv5rWL6K+V5qih5byP77yM6buY6K6k5YC85Li6ICcvJwogICAgICAgIHRhcmdldDogZnVuY3Rpb24oZmlsZSwgY2h1bmtGaWxlLCBtb2RlKSB7CiAgICAgICAgICAvLyDliIblnZfkuIrkvKDliY3mr4/mrKHpg73kvJrov5vlhaXliLDor6Xmlrnms5UKICAgICAgICAgIGNvbnNvbGUubG9nKCLov5vlhaXliLB0YXJnZXQiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCLmlofku7blkI3vvJoiICsgZmlsZS5uYW1lKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCLlvZPliY3liIblnZfluo/lj7ciICsgY2h1bmtGaWxlLm9mZnNldCk7CiAgICAgICAgICBjb25zb2xlLmxvZygi6I635Y+W5Yiw5YiG5Z2X5LiK5LygVVJM77yaIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlLmNodW5rVXJsRGF0YSk7CiAgICAgICAgICBjb25zdCBrZXkgPSAiY2h1bmtfIiArIGNodW5rRmlsZS5vZmZzZXQ7IC8vIOmUruWAvCDnlKjkuo7ojrflj5bliIblnZfpk77mjqVVUkwKICAgICAgICAgIHJldHVybiBmaWxlLmNodW5rVXJsRGF0YVtrZXldOwogICAgICAgIH0sCiAgICAgICAgLy8g5Li65q+P5Liq5Z2X5ZCR5pyN5Yqh5Zmo5Y+R5Ye6IEdFVCDor7fmsYLvvIzku6Xmn6XnnIvlroPmmK/lkKblt7Lnu4/lrZjlnKjjgILlpoLmnpzlnKjmnI3liqHlmajnq6/lrp7njrDvvIwKICAgICAgICAvLyDov5nlsIblhYHorrjlnKjmtY/op4jlmajltKnmuoPnlJroh7PorqHnrpfmnLrph43mlrDlkK/liqjlkI7nu6fnu63kuIrkvKDjgIIo6buY6K6kOiB0cnVlKQogICAgICAgIHRlc3RDaHVua3M6IHRydWUsCiAgICAgICAgLy8g5YiG5Z2X5pe25oyJ54Wn6K+l5YC85p2l5YiG44CC5pyA5ZCO5LiA5Liq5LiK5Lyg5Z2X55qE5aSn5bCP5piv5Y+v6IO95piv5aSn5LqO562J5LqOMeWAjeeahOi/meS4quWAvOS9huaYr+Wwj+S6juS4pOWAjeeahOi/meS4quWAvOWkp+Wwj++8jAogICAgICAgIC8vIOWPr+ingei/meS4qiBJc3N1ZSAjNTHvvIzpu5jorqQgMSoxMDI0KjEwMjTjgIIKICAgICAgICBjaHVua1NpemU6IDUgKiAxMDI0ICogMTAyNCwKICAgICAgICAvLyDlvLrliLbmiYDmnInlnZflsI/kuo7miJbnrYnkuo4gY2h1bmtTaXpl44CC5ZCm5YiZ77yM5pyA5ZCO5LiA5Liq5Z2X5bCG5aSn5LqO5oiW562J5LqOY2h1bmtTaXpl44CCKOm7mOiupDogZmFsc2UpCiAgICAgICAgZm9yY2VDaHVua1NpemU6IHRydWUsCiAgICAgICAgLy8g5YyF5ZCr5Zyo5bim5pyJ5pWw5o2u55qE5aSa6YOo5YiGIFBPU1Qg5Lit55qE6aKd5aSW5Y+C5pWw44CC6L+Z5Y+v5Lul5piv5LiA5Liq5a+56LGh5oiW5LiA5Liq5Ye95pWw44CC5aaC5p6c5piv5LiA5Liq5Ye95pWw77yMCiAgICAgICAgLy8g5a6D5bCG6KKr5Lyg6YCS5LiA5LiqIFVwbG9hZGVyLkZpbGXjgIHkuIDkuKogVXBsb2FkZXIuQ2h1bmsg5a+56LGh5ZKM5LiA5LiqIGlzVGVzdCDluIPlsJTlgLzvvIjpu5jorqTlgLx7fe+8mu+8iQogICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihmaWxlLCBjaHVua0ZpbGUsIG1vZGUpIHsKICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IHBhcnROdW1iZXI6IGNodW5rRmlsZS5vZmZzZXQgKyAxIH07CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9LAogICAgICAgIHVwbG9hZE1ldGhvZDogIlBVVCIsCiAgICAgICAgLy8gIOW9k+S4iuS8oOeahOaXtuWAmeaJgOS9v+eUqOeahOaYr+aWueW8j++8jOWPr+mAiSBtdWx0aXBhcnTjgIFvY3RldO+8jOm7mOiupCBtdWx0aXBhcnTvvIzlj4LogIMgbXVsdGlwYXJ0IHZzIG9jdGV044CCCiAgICAgICAgLy8gTWluaU8g55qE5YiG54mH5LiN6IO95L2/55So6KGo5Y2VCiAgICAgICAgbWV0aG9kOiAib2N0ZXQiLAogICAgICAgIC8vICDlpITnkIbor7fmsYLlj4LmlbDvvIzpu5jorqQgZnVuY3Rpb24gKHBhcmFtcykge3JldHVybiBwYXJhbXN977yM5LiA6Iis55So5LqO5L+u5pS55Y+C5pWw5ZCN5a2X5oiW6ICF5Yig6Zmk5Y+C5pWw44CCMC41LjLniYjmnKzlkI7vvIwKICAgICAgICBwcm9jZXNzUGFyYW1zOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICB9CiAgICAgICAgLy8gaGVhZGVyczogewogICAgICAgIC8vICAnQ29udGVudC1UeXBlJzogJ2JpbmFyeS9vY3RldC1zdHJlYW0nCiAgICAgICAgLy8gfQogICAgICB9LAogICAgICBhdHRyczogewogICAgICAgIGFjY2VwdDogIioiIC8vIOWPr+aOpeWPl+eahOaWh+S7tuexu+WeiwogICAgICB9LAogICAgICBwYW5lbFNob3c6IGZhbHNlIC8vICDkuIrkvKDmlofku7bpnaLmnb/mmK/lkKbmmL7npLoKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5YWo5bGA5LiK5Lyg57uE5Lu2IHVwbG9hZGVy5a6e5L6LCiAgICB1cGxvYWRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMudXBsb2FkZXIudXBsb2FkZXI7CiAgICB9LAogICAgLy8g5b2T5YmN5omA5Zyo6Lev5b6ECiAgICBmaWxlUGF0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnF1ZXJ5LmZpbGVQYXRoID8gdGhpcy4kcm91dGUucXVlcnkuZmlsZVBhdGggOiAiLyI7CiAgICB9LAogICAgLy8g5piv5ZCm6Kem5Y+R5LiK5Lyg5paH5Lu25LqL5Lu2CiAgICBzdGFydFVwbG9hZEZpbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5maWxlLnN0YXJ0VXBsb2FkRmlsZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOinpuWPkemAieaLqeaWh+S7tuaMiemSrueahOeCueWHu+S6i+S7tgogICAgdHJpZ2dlclNlbGVjdEZpbGVDbGljaygpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRCdG4uJGVsLmNsaWNrKCk7IC8vIOinpuWPkSDpgInmi6nmlofku7bmjInpkq4g55qE54K55Ye75LqL5Lu2CiAgICB9LAoKICAgIC8vIOaWh+S7tua3u+WKoCDlm57osIPlh73mlbAKICAgIGhhbmRsZUZpbGVBZGRlZChmaWxlKSB7CiAgICAgIHRoaXMucGFuZWxTaG93ID0gdHJ1ZTsgLy8gIOaYvuekuuaWh+S7tuS4iuS8oOmdouadvwogICAgICB0aGlzLmNhbGN1bGF0ZUZpbGVNRDUoZmlsZSk7IC8vICDorqHnrpfmlofku7ZNRDXlgLwKICAgICAgLy8g6K6h566XTUQ1CiAgICAgIC8vIOiOt+WPluWIhuWdl+S4iuS8oOmTvuaOpQogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgY29uc3QgcmVzID0gdGhpcy5nZXRDaHVua1VwbG9hZFVybChmaWxlKTsKICAgICAgY29uc29sZS5sb2coIuaWh+S7tuiiq+a3u+WKoOafpeeci+aYr+WQpuiOt+WPluWIsOWIhuWdl1VSTCIpOwogICAgICBjb25zb2xlLmxvZyhmaWxlLmNodW5rVXJsRGF0YSk7CiAgICB9LAogICAgYXN5bmMgZ2V0Q2h1bmtVcGxvYWRVcmwoZmlsZSkgewogICAgICAvLyDlkJHlhbfmnInmjIflrppJROeahOeUqOaIt+WPkeWHuuivt+axggogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgY29uc29sZS5sb2coIuiOt+WPluWIhuWdl+S4iuS8oOmTvuaOpSIpOwogICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUubmFtZTsgLy8g5paH5Lu25ZCNCiAgICAgIGNvbnN0IGZpbGVTaXplID0gZmlsZS5zaXplOyAvLyDmlofku7blpKflsI8KICAgICAgY29uc3QgY2h1bmtTaXplID0gZmlsZS5jaHVua3MubGVuZ3RoOyAvLyDliIbniYfmlbAKICAgICAgLy8gY29uc3QgIGZpbGUKICAgICAgLy8g6K+35rGC5ZCO5Y+w6L+U5Zue5q+P5Liq5YiG5Z2X55qE5LiK5Lyg6ZO+5o6lCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRVcEZpbGUoewogICAgICAgIGZpbGVuYW1lOiBmaWxlTmFtZSwKICAgICAgICBjaHVua051bWJlcjogY2h1bmtTaXplLAogICAgICAgIGZpbGVQYXRoOiB0aGlzLmZpbGVQYXRoLAogICAgICAgIHVwbG9hZFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgIGZpbGVTaXplOiBmaWxlU2l6ZSwKICAgICAgICBpZGVudGlmaWVyOiBmaWxlLnVuaXF1ZUlkZW50aWZpZXIKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2coIuiOt+WPluWIsOeahHVwbG9hZElkOiIgKyByZXNwb25zZS51cGxvYWRJZCk7CiAgICAgICAgICBjb25zb2xlLmxvZygi6I635Y+W5Yiw55qE5YiG54mH5LiK5Lyg6ZuG5ZCIVVJMOiIpOwogICAgICAgICAgZmlsZS5jaHVua1VybERhdGEgPSByZXNwb25zZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUuY2h1bmtVcmxEYXRhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5paH5Lu25LiK5Lyg6L+H56iLIOWbnuiwg+WHveaVsAogICAgICogQHBhcmFtIHJvb3RGaWxlIOaIkOWKn+S4iuS8oOeahOaWh+S7tuaJgOWxnueahOaguSBVcGxvYWRlci5GaWxlIOWvueixoe+8jOWug+W6lOivpeWMheWQq+aIluiAheetieS6juaIkOWKn+S4iuS8oOaWh+S7tgogICAgICogQHBhcmFtIGZpbGUg5b2T5YmN5oiQ5Yqf55qEIFVwbG9hZGVyLkZpbGUg5a+56LGh5pys6LqrCiAgICAgKiBAcGFyYW0gY2h1bmsgVXBsb2FkZXIuQ2h1bmsg5a6e5L6L77yM5a6D5bCx5piv6K+l5paH5Lu255qE5pyA5ZCO5LiA5Liq5Z2X5a6e5L6L77yM5aaC5p6c5L2g5oOz5b6X5Yiw6K+35rGC5ZON5bqU56CB55qE6K+d77yMY2h1bmsueGhyLnN0YXR1cyDlsLHmmK8KICAgICAqLwogICAgb25GaWxlUHJvZ3Jlc3Mocm9vdEZpbGUsIGZpbGUsIGNodW5rKSB7CiAgICAgIC8vIOaJk+WNsOaWh+S7tuS4iuS8oOi/h+eoi+S4reeahOS/oeaBrwogICAgICBjb25zb2xlLmxvZygKICAgICAgICBg5LiK5Lyg5LitICR7ZmlsZS5uYW1lfe+8jGNodW5r77yaJHtjaHVuay5zdGFydEJ5dGUgLwogICAgICAgICAgMTAyNCAvCiAgICAgICAgICAxMDI0fSB+ICR7Y2h1bmsuZW5kQnl0ZSAvIDEwMjQgLyAxMDI0fWAKICAgICAgKTsKICAgIH0sCiAgICAvKioKICAgICAqIOaWh+S7tuS4iuS8oOaIkOWKnyDlm57osIPlh73mlbAKICAgICAqIEBwYXJhbSByb290RmlsZQogICAgICogQHBhcmFtIGZpbGUKICAgICAqLwogICAgaGFuZGxlRmlsZVN1Y2Nlc3Mocm9vdEZpbGUsIGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coIuWNleS4quaWh+S7tuS4iuS8oOaIkOWKnyIsIGFyZ3VtZW50cyk7CiAgICAgIC8vIOiwg+eUqOWQjuWPsOWQiOW5tuaWh+S7tgogICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUubmFtZTsgLy8g5paH5Lu25ZCNCiAgICAgIGNvbnN0IHVwbG9hZElkID0gZmlsZS5jaHVua1VybERhdGEudXBsb2FkSWQ7IC8vIHVwbG9hZElkCiAgICAgIGNvbnNvbGUubG9nKCk7CiAgICAgIGdldE11bHRpcGFydFVwbG9hZCh7CiAgICAgICAgRmlsZU5hbWU6IGZpbGVOYW1lLAogICAgICAgIHVwbG9hZElkOiB1cGxvYWRJZAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgiZ2V0VGFibGVEYXRhIik7CiAgICAgIGNvbnNvbGUubG9nKCLlkIjlubblrozmiJAiKTsKICAgIH0sCgogICAgLy8g5paH5Lu25LiK5Lyg5aSx6LSlIOWbnuiwg+WHveaVsAogICAgaGFuZGxlRmlsZUVycm9yKHJvb3RGaWxlLCBmaWxlLCByZXNwb25zZVN0cikgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBKU09OLnBhcnNlKHJlc3BvbnNlU3RyKS5tZXNzYWdlLAogICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOiuoeeul+aWh+S7tk1ENeWAvAogICAgY2FsY3VsYXRlRmlsZU1ENShmaWxlKSB7CiAgICAgIGxldCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgbGV0IGJsb2JTbGljZSA9CiAgICAgICAgRmlsZS5wcm90b3R5cGUuc2xpY2UgfHwKICAgICAgICBGaWxlLnByb3RvdHlwZS5tb3pTbGljZSB8fAogICAgICAgIEZpbGUucHJvdG90eXBlLndlYmtpdFNsaWNlOwogICAgICBsZXQgY3VycmVudENodW5rID0gMDsKICAgICAgY29uc3QgY2h1bmtTaXplID0gNSAqIDEwMjQgKiAxMDI0OwogICAgICBsZXQgY2h1bmtzID0gTWF0aC5jZWlsKGZpbGUuc2l6ZSAvIGNodW5rU2l6ZSk7CiAgICAgIGxldCBzcGFyayA9IG5ldyBTcGFya01ENS5BcnJheUJ1ZmZlcigpOwogICAgICBmaWxlLnBhdXNlKCk7IC8vICDmmoLlgZzkuIrkvKDmlofku7YKICAgICAgbG9hZE5leHQoKTsKICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBlID0+IHsKICAgICAgICBzcGFyay5hcHBlbmQoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICBpZiAoY3VycmVudENodW5rIDwgY2h1bmtzKSB7CiAgICAgICAgICBjdXJyZW50Q2h1bmsrKzsKICAgICAgICAgIGxvYWROZXh0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBtZDUgPSBzcGFyay5lbmQoKTsKICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRmlsZU1ENUVuZChtZDUsIGZpbGUpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coCiAgICAgICAgICAvLyAgIGBNRDXorqHnrpflrozmr5XvvJoke2ZpbGUubmFtZX0gXG5NRDXvvJoke21kNX0gXG7liIbniYfvvJoke2NodW5rc30g5aSn5bCPOiR7CiAgICAgICAgICAvLyAgICAgZmlsZS5zaXplCiAgICAgICAgICAvLyAgIH0g55So5pe277yaJHtuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRpbWV9IG1zYAogICAgICAgICAgLy8gKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogIuS4iuS8oOWHuumUmSIsCiAgICAgICAgICBtZXNzYWdlOiBg5paH5Lu2JHtmaWxlLm5hbWV96K+75Y+W5Ye66ZSZ77yM6K+35qOA5p+l6K+l5paH5Lu2YCwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICAgIGZpbGUuY2FuY2VsKCk7IC8vICDlj5bmtojkuIrkvKDkuJTku47mlofku7bliJfooajkuK3np7vpmaTjgIIKICAgICAgfTsKICAgICAgZnVuY3Rpb24gbG9hZE5leHQoKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gY3VycmVudENodW5rICogY2h1bmtTaXplOwogICAgICAgIGxldCBlbmQgPQogICAgICAgICAgc3RhcnQgKyBjaHVua1NpemUgPj0gZmlsZS5zaXplID8gZmlsZS5zaXplIDogc3RhcnQgKyBjaHVua1NpemU7CiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iU2xpY2UuY2FsbChmaWxlLmZpbGUsIHN0YXJ0LCBlbmQpKTsKICAgICAgfQogICAgfSwKICAgIC8vIOaWh+S7tk1ENeiuoeeul+e7k+adnwogICAgY2FsY3VsYXRlRmlsZU1ENUVuZChtZDUsIGZpbGUpIHsKICAgICAgZmlsZS51bmlxdWVJZGVudGlmaWVyID0gbWQ1OwogICAgICBmaWxlLnJlc3VtZSgpOyAvLyAg57un57ut5LiK5Lyg5paH5Lu2CiAgICB9LAoKICAgIC8vIOWFs+mXreS4iuS8oOmdouadvwogICAgaGFuZGxlQ2xvc2VQYW5lbCgpIHsKICAgICAgdGhpcy51cGxvYWRlci5jYW5jZWwoKTsgLy8gIOWPlua2iOS4iuS8oOaWh+S7tgogICAgICB0aGlzLnBhbmVsU2hvdyA9IGZhbHNlOwoKICAgICAgdGhpcy4kZW1pdCgiZ2V0VGFibGVEYXRhIik7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["FileUploader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"FileUploader.vue","sourceRoot":"src/views/components","sourcesContent":["<template>\n  <div id=\"global-uploader\">\n    <!-- 上传组件 -->\n    <uploader\n      class=\"uploader-box\"\n      ref=\"uploader\"\n      :options=\"options\"\n      :autoStart=\"false\"\n      @file-added=\"handleFileAdded\"\n      @file-progress=\"onFileProgress\"\n      @file-success=\"handleFileSuccess\"\n      @file-error=\"handleFileError\"\n    >\n      <uploader-unsupport></uploader-unsupport>\n      <!-- 选择文件按钮 -->\n      <uploader-btn class=\"select-file-btn\" :attrs=\"attrs\" ref=\"uploadBtn\"\n        >选择文件</uploader-btn\n      >\n      <!-- 正在上传的文件面板 -->\n      <uploader-list v-show=\"panelShow\">\n        <div class=\"file-panel\" slot-scope=\"props\">\n          <div class=\"panel-title\">\n            <span class=\"text\">上传列表</span>\n            <div class=\"operate-btn-wrapper\">\n              <el-button\n                type=\"text\"\n                title=\"关闭窗口\"\n                icon=\"el-icon-close\"\n                @click=\"handleClosePanel\"\n              >\n              </el-button>\n            </div>\n          </div>\n          <!-- 正在上传的文件列表 -->\n          <ul class=\"file-list\">\n            <li class=\"file-item\" v-for=\"file in props.fileList\" :key=\"file.id\">\n              <uploader-file\n                ref=\"files\"\n                :class=\"`file_${file.id}`\"\n                :file=\"file\"\n                :list=\"true\"\n              ></uploader-file>\n            </li>\n            <div class=\"no-file\" v-if=\"!props.fileList.length\">\n              <i class=\"icon-empty-file\"></i> 暂无待上传文件\n            </div>\n          </ul>\n        </div>\n      </uploader-list>\n    </uploader>\n  </div>\n</template>\n\n<script>\nimport SparkMD5 from \"spark-md5\";\nimport { getMultipartUpload, getUpFile } from \"@/request/file\";\n\nexport default {\n  name: \"FileUploader\",\n  data() {\n    return {\n      options: {\n        // 目标上传 URL，可以是字符串也可以是函数，如果是函数的话，则会传入 Uploader.File 实例、\n        // 当前块 Uploader.Chunk 以及是否是测试模式，默认值为 '/'\n        target: function(file, chunkFile, mode) {\n          // 分块上传前每次都会进入到该方法\n          console.log(\"进入到target\");\n          console.log(\"文件名：\" + file.name);\n          console.log(\"当前分块序号\" + chunkFile.offset);\n          console.log(\"获取到分块上传URL：\");\n          console.log(file.chunkUrlData);\n          const key = \"chunk_\" + chunkFile.offset; // 键值 用于获取分块链接URL\n          return file.chunkUrlData[key];\n        },\n        // 为每个块向服务器发出 GET 请求，以查看它是否已经存在。如果在服务器端实现，\n        // 这将允许在浏览器崩溃甚至计算机重新启动后继续上传。(默认: true)\n        testChunks: true,\n        // 分块时按照该值来分。最后一个上传块的大小是可能是大于等于1倍的这个值但是小于两倍的这个值大小，\n        // 可见这个 Issue #51，默认 1*1024*1024。\n        chunkSize: 5 * 1024 * 1024,\n        // 强制所有块小于或等于 chunkSize。否则，最后一个块将大于或等于chunkSize。(默认: false)\n        forceChunkSize: true,\n        // 包含在带有数据的多部分 POST 中的额外参数。这可以是一个对象或一个函数。如果是一个函数，\n        // 它将被传递一个 Uploader.File、一个 Uploader.Chunk 对象和一个 isTest 布尔值（默认值{}：）\n        query: function(file, chunkFile, mode) {\n          const data = { partNumber: chunkFile.offset + 1 };\n          return data;\n        },\n        uploadMethod: \"PUT\",\n        //  当上传的时候所使用的是方式，可选 multipart、octet，默认 multipart，参考 multipart vs octet。\n        // MiniO 的分片不能使用表单\n        method: \"octet\",\n        //  处理请求参数，默认 function (params) {return params}，一般用于修改参数名字或者删除参数。0.5.2版本后，\n        processParams: function(params) {\n          return {};\n        }\n        // headers: {\n        //  'Content-Type': 'binary/octet-stream'\n        // }\n      },\n      attrs: {\n        accept: \"*\" // 可接受的文件类型\n      },\n      panelShow: false //  上传文件面板是否显示\n    };\n  },\n  computed: {\n    // 全局上传组件 uploader实例\n    uploader() {\n      return this.$refs.uploader.uploader;\n    },\n    // 当前所在路径\n    filePath() {\n      return this.$route.query.filePath ? this.$route.query.filePath : \"/\";\n    },\n    // 是否触发上传文件事件\n    startUploadFile() {\n      return this.$store.state.file.startUploadFile;\n    }\n  },\n  methods: {\n    // 触发选择文件按钮的点击事件\n    triggerSelectFileClick() {\n      this.$refs.uploadBtn.$el.click(); // 触发 选择文件按钮 的点击事件\n    },\n\n    // 文件添加 回调函数\n    handleFileAdded(file) {\n      this.panelShow = true; //  显示文件上传面板\n      this.calculateFileMD5(file); //  计算文件MD5值\n      // 计算MD5\n      // 获取分块上传链接\n      // eslint-disable-next-line no-unused-vars\n      const res = this.getChunkUploadUrl(file);\n      console.log(\"文件被添加查看是否获取到分块URL\");\n      console.log(file.chunkUrlData);\n    },\n    async getChunkUploadUrl(file) {\n      // 向具有指定ID的用户发出请求\n      console.log(file);\n      console.log(\"获取分块上传链接\");\n      const fileName = file.name; // 文件名\n      const fileSize = file.size; // 文件大小\n      const chunkSize = file.chunks.length; // 分片数\n      // const  file\n      // 请求后台返回每个分块的上传链接\n      // eslint-disable-next-line no-unused-vars\n      const res = await getUpFile({\n        filename: fileName,\n        chunkNumber: chunkSize,\n        filePath: this.filePath,\n        uploadTime: new Date().getTime(),\n        fileSize: fileSize,\n        identifier: file.uniqueIdentifier\n      })\n        .then(function(response) {\n          console.log(\"获取到的uploadId:\" + response.uploadId);\n          console.log(\"获取到的分片上传集合URL:\");\n          file.chunkUrlData = response;\n          console.log(file.chunkUrlData);\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    /**\n     * 文件上传过程 回调函数\n     * @param rootFile 成功上传的文件所属的根 Uploader.File 对象，它应该包含或者等于成功上传文件\n     * @param file 当前成功的 Uploader.File 对象本身\n     * @param chunk Uploader.Chunk 实例，它就是该文件的最后一个块实例，如果你想得到请求响应码的话，chunk.xhr.status 就是\n     */\n    onFileProgress(rootFile, file, chunk) {\n      // 打印文件上传过程中的信息\n      console.log(\n        `上传中 ${file.name}，chunk：${chunk.startByte /\n          1024 /\n          1024} ~ ${chunk.endByte / 1024 / 1024}`\n      );\n    },\n    /**\n     * 文件上传成功 回调函数\n     * @param rootFile\n     * @param file\n     */\n    handleFileSuccess(rootFile, file) {\n      console.log(\"单个文件上传成功\", arguments);\n      // 调用后台合并文件\n      const fileName = file.name; // 文件名\n      const uploadId = file.chunkUrlData.uploadId; // uploadId\n      console.log();\n      getMultipartUpload({\n        FileName: fileName,\n        uploadId: uploadId\n      })\n        .then(function(response) {\n          console.log(response);\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n      this.$emit(\"getTableData\");\n      console.log(\"合并完成\");\n    },\n\n    // 文件上传失败 回调函数\n    handleFileError(rootFile, file, responseStr) {\n      this.$message({\n        message: JSON.parse(responseStr).message,\n        type: \"error\"\n      });\n    },\n\n    // 计算文件MD5值\n    calculateFileMD5(file) {\n      let fileReader = new FileReader();\n      let blobSlice =\n        File.prototype.slice ||\n        File.prototype.mozSlice ||\n        File.prototype.webkitSlice;\n      let currentChunk = 0;\n      const chunkSize = 5 * 1024 * 1024;\n      let chunks = Math.ceil(file.size / chunkSize);\n      let spark = new SparkMD5.ArrayBuffer();\n      file.pause(); //  暂停上传文件\n      loadNext();\n      fileReader.onload = e => {\n        spark.append(e.target.result);\n        if (currentChunk < chunks) {\n          currentChunk++;\n          loadNext();\n        } else {\n          let md5 = spark.end();\n          this.calculateFileMD5End(md5, file);\n          // console.log(\n          //   `MD5计算完毕：${file.name} \\nMD5：${md5} \\n分片：${chunks} 大小:${\n          //     file.size\n          //   } 用时：${new Date().getTime() - time} ms`\n          // );\n        }\n      };\n      fileReader.onerror = function() {\n        this.$notify({\n          title: \"上传出错\",\n          message: `文件${file.name}读取出错，请检查该文件`,\n          type: \"error\",\n          duration: 2000\n        });\n        file.cancel(); //  取消上传且从文件列表中移除。\n      };\n      function loadNext() {\n        let start = currentChunk * chunkSize;\n        let end =\n          start + chunkSize >= file.size ? file.size : start + chunkSize;\n        fileReader.readAsArrayBuffer(blobSlice.call(file.file, start, end));\n      }\n    },\n    // 文件MD5计算结束\n    calculateFileMD5End(md5, file) {\n      file.uniqueIdentifier = md5;\n      file.resume(); //  继续上传文件\n    },\n\n    // 关闭上传面板\n    handleClosePanel() {\n      this.uploader.cancel(); //  取消上传文件\n      this.panelShow = false;\n\n      this.$emit(\"getTableData\");\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n#global-uploader {\n  position: fixed;\n  z-index: 20;\n  right: 15px;\n  bottom: 15px;\n\n  .uploader-box {\n    width: 520px;\n  }\n\n  .file-panel {\n    background-color: #fff;\n    border: 1px solid #e2e2e2;\n    border-radius: 7px 7px 0 0;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n\n    .panel-title {\n      display: flex;\n      height: 40px;\n      line-height: 40px;\n      padding: 0 16px;\n      border-bottom: 1px solid #ddd;\n\n      .text {\n        padding-left: 0;\n        margin-bottom: 0;\n        font-size: 16px;\n        color: #303133;\n      }\n\n      .operate-btn-wrapper {\n        flex: 1;\n        text-align: right;\n\n        >>> .el-button {\n          *:hover {\n            opacity: 0.5;\n          }\n\n          i[class^=el-icon-] {\n            color: #000;\n          }\n        }\n      }\n    }\n\n    .file-list {\n      position: relative;\n      height: 240px;\n      overflow-x: hidden;\n      overflow-y: auto;\n      background-color: #fff;\n      font-size: 14px;\n\n      .file-item {\n        background-color: #fff;\n\n        >>>.uploader-file-icon {\n          display: none;\n        }\n      }\n    }\n  }\n\n  .no-file {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 16px;\n  }\n\n  /deep/.uploader-file-actions > span {\n    margin-right: 6px;\n  }\n}\n\n/* 隐藏上传按钮 */\n.select-file-btn {\n  display: none;\n}\n</style>\n"]}]}