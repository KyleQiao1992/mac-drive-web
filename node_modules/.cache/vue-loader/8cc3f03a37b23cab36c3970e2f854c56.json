{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue","mtime":1701827905859},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHZpZGVvUGxheWVyIH0gZnJvbSAidnVlLXZpZGVvLXBsYXllciI7CmltcG9ydCAidmlkZW8uanMvZGlzdC92aWRlby1qcy5jc3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaWRlb1BsYXllciIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXllck9wdGlvbnM6IHsKICAgICAgICBwbGF5YmFja1JhdGVzOiBbMC41LCAxLjAsIDEuNSwgMi4wLCAyLjVdLCAvLyDlj6/pgInnmoTmkq3mlL7pgJ/luqYKICAgICAgICBhdXRvcGxheTogdHJ1ZSwgLy8g5aaC5p6c5Li6dHJ1ZSzmtY/op4jlmajlh4blpIflpb3ml7blvIDlp4vlm57mlL7jgIIKICAgICAgICBtdXRlZDogZmFsc2UsIC8vIOm7mOiupOaDheWGteS4i+WwhuS8mua2iOmZpOS7u+S9lemfs+mikeOAggogICAgICAgIGxvb3A6IGZhbHNlLCAvLyDmmK/lkKbop4bpopHkuIDnu5PmnZ/lsLHph43mlrDlvIDlp4vjgIIKICAgICAgICBwcmVsb2FkOiAiYXV0byIsIC8vIOW7uuiurua1j+iniOWZqOWcqDx2aWRlbz7liqDovb3lhYPntKDlkI7mmK/lkKblupTor6XlvIDlp4vkuIvovb3op4bpopHmlbDmja7jgIJhdXRv5rWP6KeI5Zmo6YCJ5oup5pyA5L2z6KGM5Li6LOeri+WNs+W8gOWni+WKoOi9veinhumike+8iOWmguaenOa1j+iniOWZqOaUr+aMge+8iQogICAgICAgIGxhbmd1YWdlOiAiemgtQ04iLAogICAgICAgIC8vIGFzcGVjdFJhdGlvOiAnMTY6OScsIC8vIOWwhuaSreaUvuWZqOe9ruS6jua1geeVheaooeW8j++8jOW5tuWcqOiuoeeul+aSreaUvuWZqOeahOWKqOaAgeWkp+Wwj+aXtuS9v+eUqOivpeWAvOOAguWAvOW6lOivpeS7o+ihqOS4gOS4quavlOS+iyAtIOeUqOWGkuWPt+WIhumalOeahOS4pOS4quaVsOWtl++8iOS+i+WmgiIxNjo5IuaIliI0OjMi77yJCiAgICAgICAgZmx1aWQ6IHRydWUsIC8vIOW9k3RydWXml7bvvIxWaWRlby5qcyBwbGF5ZXLlsIbmi6XmnInmtYHkvZPlpKflsI/jgILmjaLlj6Xor53or7TvvIzlroPlsIbmjInmr5TkvovnvKnmlL7ku6XpgILlupTlhbblrrnlmajjgIIKICAgICAgICBzb3VyY2VzOiBbXSwKICAgICAgICBwb3N0ZXI6ICIiLCAvLyDlsIHpnaLlnLDlnYAKICAgICAgICBub3RTdXBwb3J0ZWRNZXNzYWdlOiAi5q2k6KeG6aKR5pqC5peg5rOV5pKt5pS+77yM6K+356iN5ZCO5YaN6K+VIiwgLy8g5YWB6K646KaG55uWVmlkZW8uanPml6Dms5Xmkq3mlL7lqpLkvZPmupDml7bmmL7npLrnmoTpu5jorqTkv6Hmga/jgIIKICAgICAgICBjb250cm9sQmFyOiB7CiAgICAgICAgICB0aW1lRGl2aWRlcjogdHJ1ZSwgLy8g5b2T5YmN5pe26Ze05ZKM5oyB57ut5pe26Ze055qE5YiG6ZqU56ymCiAgICAgICAgICBkdXJhdGlvbkRpc3BsYXk6IHRydWUsIC8vIOaYvuekuuaMgee7reaXtumXtAogICAgICAgICAgcmVtYWluaW5nVGltZURpc3BsYXk6IHRydWUsIC8vIOaYr+WQpuaYvuekuuWJqeS9meaXtumXtOWKn+iDvQogICAgICAgICAgZnVsbHNjcmVlblRvZ2dsZTogdHJ1ZSAvLyDmmK/lkKbmmL7npLrlhajlsY/mjInpkq4KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICB2aWRlb1BsYXllcgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpc2libGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wbGF5ZXIudmlkZW9QbGF5ZXIudmlzaWJsZTsKICAgIH0sCiAgICBmaWxlbmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnBsYXllci52aWRlb1BsYXllci5maWxlbmFtZTsKICAgIH0sCiAgICB1cmwoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wbGF5ZXIudmlkZW9QbGF5ZXIudXJsOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOebkeWQrCDlm77niYfmn6XnnIvnu4Tku7Yg5pi+6ZqQ54q25oCB5Y+Y5YyWCiAgICB2aXNpYmxlKHZhbCkgewogICAgICBsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKTsKICAgICAgaWYgKHZhbCkgewogICAgICAgIC8vIOaMguWcqGJvZHnkuIvvvIzpmLLmraLnu4Tku7blhYPntKDmnInmoLflvI90cmFuc2Zvcm3ogIzkvb9wb3NpdGlvbjogZml4ZWTlpLHmlYgKICAgICAgICBib2R5LmFwcGVuZENoaWxkKHRoaXMuJGVsKTsKICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgICAgLy8g5re75Yqg6ZSu55uYRXNj5LqL5Lu2CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBlID0+IHsKICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsKICAgICAgICAgICAgICB0aGlzLmNsb3NlVmlkZW9SZXZpZXcoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXl1cCIsIGUgPT4gewogICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsKICAgICAgICAgICAgdGhpcy5jbG9zZVZpZGVvUmV2aWV3KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB1cmwoKSB7CiAgICAgIHRoaXMucGxheWVyT3B0aW9ucy5zb3VyY2VzID0gW3sgc3JjOiB0aGlzLnVybCwgdHlwZTogInZpZGVvL3dlYm0iIH1dOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8gIOacgOWwj+WMlgogICAgbWluVmlkZW9SZXZpZXcoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh0aGlzLmZpbGVuYW1lICsgIuato+WcqOWQjuWPsOaSreaUviIpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFZpZGVvUGxheU1pbiIpOwogICAgfSwKICAgIGNsb3NlVmlkZW9SZXZpZXcoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6KeG6aKR5pKt5pS+5Zmo5bey5YWz6ZetIik7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0UGxheWluZyIsIGZhbHNlKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjbG9zZVZpZGVvUGxheSIpOwogICAgfSwKICAgIC8vIOW3suW8gOWni+aSreaUvuWbnuiwgwogICAgb25QbGF5ZXJQbGF5aW5nKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFBsYXlpbmciLCB0cnVlKTsKICAgIH0sCiAgICAvLyDop4bpopHmkq3lrozlm57osIMKICAgIG9uUGxheWVyRW5kZWQoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0UGxheWluZyIsIGZhbHNlKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"img-review-wrapper\" v-show=\"visible\" @click.self=\"minVideoReview\">\n    <!-- 顶部信息栏 & 工具栏 -->\n    <div class=\"tip-wrapper\">\n      <div class=\"name\" :title=\"filename\" v-text=\"filename\"></div>\n      <div class=\"tool-wrapper\">\n        <i\n          class=\"item el-icon-refresh-right el-icon-circle-close\"\n          style=\"padding-right: 20px\"\n          title=\"关闭视频\"\n          @click=\"closeVideoReview()\"\n        ></i>\n        <a\n          class=\"item download-link\"\n          target=\"_blank\"\n          :href=\"url\"\n          :download=\"filename\"\n        >\n          <i class=\"el-icon-download\" title=\"保存到本地\"></i>\n        </a>\n      </div>\n    </div>\n    <!-- 视频查看 -->\n    <video-player\n      class=\"my-player\"\n      ref=\"videoPlayer\"\n      :playsinline=\"false\"\n      @playing=\"onPlayerPlaying($event)\"\n      @ended=\"onPlayerEnded($event)\"\n      :options=\"playerOptions\"\n    >\n    </video-player>\n  </div>\n</template>\n\n<script>\nimport { videoPlayer } from \"vue-video-player\";\nimport \"video.js/dist/video-js.css\";\n\nexport default {\n  name: \"VideoPlayer\",\n  data() {\n    return {\n      playerOptions: {\n        playbackRates: [0.5, 1.0, 1.5, 2.0, 2.5], // 可选的播放速度\n        autoplay: true, // 如果为true,浏览器准备好时开始回放。\n        muted: false, // 默认情况下将会消除任何音频。\n        loop: false, // 是否视频一结束就重新开始。\n        preload: \"auto\", // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: \"zh-CN\",\n        // aspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        fluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n        sources: [],\n        poster: \"\", // 封面地址\n        notSupportedMessage: \"此视频暂无法播放，请稍后再试\", // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\n        controlBar: {\n          timeDivider: true, // 当前时间和持续时间的分隔符\n          durationDisplay: true, // 显示持续时间\n          remainingTimeDisplay: true, // 是否显示剩余时间功能\n          fullscreenToggle: true // 是否显示全屏按钮\n        }\n      }\n    };\n  },\n  components: {\n    videoPlayer\n  },\n  computed: {\n    visible() {\n      return this.$store.state.player.videoPlayer.visible;\n    },\n    filename() {\n      return this.$store.state.player.videoPlayer.filename;\n    },\n    url() {\n      return this.$store.state.player.videoPlayer.url;\n    }\n  },\n  watch: {\n    // 监听 图片查看组件 显隐状态变化\n    visible(val) {\n      let body = document.querySelector(\"body\");\n      if (val) {\n        // 挂在body下，防止组件元素有样式transform而使position: fixed失效\n        body.appendChild(this.$el);\n        body.style.overflow = \"hidden\";\n        // 添加键盘Esc事件\n        this.$nextTick(() => {\n          document.addEventListener(\"keyup\", e => {\n            if (e.keyCode === 27) {\n              this.closeVideoReview();\n            }\n          });\n        });\n      } else {\n        body.style.overflow = \"auto\";\n        document.removeEventListener(\"keyup\", e => {\n          if (e.keyCode === 27) {\n            this.closeVideoReview();\n          }\n        });\n      }\n    },\n    url() {\n      this.playerOptions.sources = [{ src: this.url, type: \"video/webm\" }];\n    }\n  },\n  methods: {\n    //  最小化\n    minVideoReview() {\n      this.$message.success(this.filename + \"正在后台播放\");\n      this.$store.commit(\"setVideoPlayMin\");\n    },\n    closeVideoReview() {\n      this.$message.success(\"视频播放器已关闭\");\n      this.$store.commit(\"setPlaying\", false);\n      this.$store.commit(\"closeVideoPlay\");\n    },\n    // 已开始播放回调\n    onPlayerPlaying() {\n      this.$store.commit(\"setPlaying\", true);\n    },\n    // 视频播完回调\n    onPlayerEnded() {\n      this.$store.commit(\"setPlaying\", false);\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n@import \"../assets/style/varibles.styl\"\n\n.img-review-wrapper\n  position fixed\n  top 0\n  right 0\n  bottom 0\n  left 0\n  overflow auto\n  width 100%\n  height 100%\n  z-index 2010\n  text-align center\n  display flex\n  align-items center\n  animation imgReviewAnimation 0.3s\n  -webkit-animation imgReviewAnimation 0.3s /* Safari and Chrome */\n  animation-iteration-count 0.3\n  -webkit-animation-iteration-count 0.3\n  animation-fill-mode forwards\n  -webkit-animation-fill-mode forwards /* Safari 和 Chrome */\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n\n  .tip-wrapper\n    position fixed\n    top 0\n    left 0\n    z-index 2011\n    background rgba(0, 0, 0, 0.5)\n    padding 0 48px\n    width 100%\n    height 48px\n    line-height 48px\n    color #fff\n    font-size 16px\n    display flex\n    justify-content space-between\n\n    .name\n      flex 1\n      padding-right 16px\n      text-align left\n      overflow hidden\n      text-overflow ellipsis\n      white-space nowrap\n\n    .tool-wrapper\n      flex 1\n      display flex\n      justify-content flex-end\n\n      .item\n        margin-left 16px\n        cursor pointer\n\n        &:hover\n          opacity 0.7\n\n      .el-icon-refresh-right\n        line-height 48px\n        font-size 18px\n\n      .download-link\n        color inherit\n        font-size 18px\n\n      .text-wrapper\n        margin-left 32px\n\n        .text\n          margin-right 8px\n\n\n  .my-player\n    width 75%\n    height 75%\n    display flex\n    align-items center\n    margin 0 auto\n</style>\n"]}]}