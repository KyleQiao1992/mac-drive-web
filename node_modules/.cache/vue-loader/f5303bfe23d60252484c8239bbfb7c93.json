{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue?vue&type=style&index=0&id=8ef35988&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue","mtime":1701827905859},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi9hc3NldHMvc3R5bGUvdmFyaWJsZXMuc3R5bCIKCi5pbWctcmV2aWV3LXdyYXBwZXIKICBwb3NpdGlvbiBmaXhlZAogIHRvcCAwCiAgcmlnaHQgMAogIGJvdHRvbSAwCiAgbGVmdCAwCiAgb3ZlcmZsb3cgYXV0bwogIHdpZHRoIDEwMCUKICBoZWlnaHQgMTAwJQogIHotaW5kZXggMjAxMAogIHRleHQtYWxpZ24gY2VudGVyCiAgZGlzcGxheSBmbGV4CiAgYWxpZ24taXRlbXMgY2VudGVyCiAgYW5pbWF0aW9uIGltZ1Jldmlld0FuaW1hdGlvbiAwLjNzCiAgLXdlYmtpdC1hbmltYXRpb24gaW1nUmV2aWV3QW5pbWF0aW9uIDAuM3MgLyogU2FmYXJpIGFuZCBDaHJvbWUgKi8KICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50IDAuMwogIC13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCAwLjMKICBhbmltYXRpb24tZmlsbC1tb2RlIGZvcndhcmRzCiAgLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlIGZvcndhcmRzIC8qIFNhZmFyaSDlkowgQ2hyb21lICovCiAgQGtleWZyYW1lcyBpbWdSZXZpZXdBbmltYXRpb24KICAgIDAlCiAgICAgIGJhY2tncm91bmQgdHJhbnNwYXJlbnQKICAgIDEwMCUKICAgICAgYmFja2dyb3VuZCByZ2JhKDAsIDAsIDAsIDAuOCkKICBAa2V5ZnJhbWVzIGltZ1Jldmlld0FuaW1hdGlvbgogICAgMCUKICAgICAgYmFja2dyb3VuZCB0cmFuc3BhcmVudAogICAgMTAwJQogICAgICBiYWNrZ3JvdW5kIHJnYmEoMCwgMCwgMCwgMC44KQoKICAudGlwLXdyYXBwZXIKICAgIHBvc2l0aW9uIGZpeGVkCiAgICB0b3AgMAogICAgbGVmdCAwCiAgICB6LWluZGV4IDIwMTEKICAgIGJhY2tncm91bmQgcmdiYSgwLCAwLCAwLCAwLjUpCiAgICBwYWRkaW5nIDAgNDhweAogICAgd2lkdGggMTAwJQogICAgaGVpZ2h0IDQ4cHgKICAgIGxpbmUtaGVpZ2h0IDQ4cHgKICAgIGNvbG9yICNmZmYKICAgIGZvbnQtc2l6ZSAxNnB4CiAgICBkaXNwbGF5IGZsZXgKICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1iZXR3ZWVuCgogICAgLm5hbWUKICAgICAgZmxleCAxCiAgICAgIHBhZGRpbmctcmlnaHQgMTZweAogICAgICB0ZXh0LWFsaWduIGxlZnQKICAgICAgb3ZlcmZsb3cgaGlkZGVuCiAgICAgIHRleHQtb3ZlcmZsb3cgZWxsaXBzaXMKICAgICAgd2hpdGUtc3BhY2Ugbm93cmFwCgogICAgLnRvb2wtd3JhcHBlcgogICAgICBmbGV4IDEKICAgICAgZGlzcGxheSBmbGV4CiAgICAgIGp1c3RpZnktY29udGVudCBmbGV4LWVuZAoKICAgICAgLml0ZW0KICAgICAgICBtYXJnaW4tbGVmdCAxNnB4CiAgICAgICAgY3Vyc29yIHBvaW50ZXIKCiAgICAgICAgJjpob3ZlcgogICAgICAgICAgb3BhY2l0eSAwLjcKCiAgICAgIC5lbC1pY29uLXJlZnJlc2gtcmlnaHQKICAgICAgICBsaW5lLWhlaWdodCA0OHB4CiAgICAgICAgZm9udC1zaXplIDE4cHgKCiAgICAgIC5kb3dubG9hZC1saW5rCiAgICAgICAgY29sb3IgaW5oZXJpdAogICAgICAgIGZvbnQtc2l6ZSAxOHB4CgogICAgICAudGV4dC13cmFwcGVyCiAgICAgICAgbWFyZ2luLWxlZnQgMzJweAoKICAgICAgICAudGV4dAogICAgICAgICAgbWFyZ2luLXJpZ2h0IDhweAoKCiAgLm15LXBsYXllcgogICAgd2lkdGggNzUlCiAgICBoZWlnaHQgNzUlCiAgICBkaXNwbGF5IGZsZXgKICAgIGFsaWduLWl0ZW1zIGNlbnRlcgogICAgbWFyZ2luIDAgYXV0bwo="},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"VideoPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"img-review-wrapper\" v-show=\"visible\" @click.self=\"minVideoReview\">\n    <!-- 顶部信息栏 & 工具栏 -->\n    <div class=\"tip-wrapper\">\n      <div class=\"name\" :title=\"filename\" v-text=\"filename\"></div>\n      <div class=\"tool-wrapper\">\n        <i\n          class=\"item el-icon-refresh-right el-icon-circle-close\"\n          style=\"padding-right: 20px\"\n          title=\"关闭视频\"\n          @click=\"closeVideoReview()\"\n        ></i>\n        <a\n          class=\"item download-link\"\n          target=\"_blank\"\n          :href=\"url\"\n          :download=\"filename\"\n        >\n          <i class=\"el-icon-download\" title=\"保存到本地\"></i>\n        </a>\n      </div>\n    </div>\n    <!-- 视频查看 -->\n    <video-player\n      class=\"my-player\"\n      ref=\"videoPlayer\"\n      :playsinline=\"false\"\n      @playing=\"onPlayerPlaying($event)\"\n      @ended=\"onPlayerEnded($event)\"\n      :options=\"playerOptions\"\n    >\n    </video-player>\n  </div>\n</template>\n\n<script>\nimport { videoPlayer } from \"vue-video-player\";\nimport \"video.js/dist/video-js.css\";\n\nexport default {\n  name: \"VideoPlayer\",\n  data() {\n    return {\n      playerOptions: {\n        playbackRates: [0.5, 1.0, 1.5, 2.0, 2.5], // 可选的播放速度\n        autoplay: true, // 如果为true,浏览器准备好时开始回放。\n        muted: false, // 默认情况下将会消除任何音频。\n        loop: false, // 是否视频一结束就重新开始。\n        preload: \"auto\", // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: \"zh-CN\",\n        // aspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        fluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n        sources: [],\n        poster: \"\", // 封面地址\n        notSupportedMessage: \"此视频暂无法播放，请稍后再试\", // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\n        controlBar: {\n          timeDivider: true, // 当前时间和持续时间的分隔符\n          durationDisplay: true, // 显示持续时间\n          remainingTimeDisplay: true, // 是否显示剩余时间功能\n          fullscreenToggle: true // 是否显示全屏按钮\n        }\n      }\n    };\n  },\n  components: {\n    videoPlayer\n  },\n  computed: {\n    visible() {\n      return this.$store.state.player.videoPlayer.visible;\n    },\n    filename() {\n      return this.$store.state.player.videoPlayer.filename;\n    },\n    url() {\n      return this.$store.state.player.videoPlayer.url;\n    }\n  },\n  watch: {\n    // 监听 图片查看组件 显隐状态变化\n    visible(val) {\n      let body = document.querySelector(\"body\");\n      if (val) {\n        // 挂在body下，防止组件元素有样式transform而使position: fixed失效\n        body.appendChild(this.$el);\n        body.style.overflow = \"hidden\";\n        // 添加键盘Esc事件\n        this.$nextTick(() => {\n          document.addEventListener(\"keyup\", e => {\n            if (e.keyCode === 27) {\n              this.closeVideoReview();\n            }\n          });\n        });\n      } else {\n        body.style.overflow = \"auto\";\n        document.removeEventListener(\"keyup\", e => {\n          if (e.keyCode === 27) {\n            this.closeVideoReview();\n          }\n        });\n      }\n    },\n    url() {\n      this.playerOptions.sources = [{ src: this.url, type: \"video/webm\" }];\n    }\n  },\n  methods: {\n    //  最小化\n    minVideoReview() {\n      this.$message.success(this.filename + \"正在后台播放\");\n      this.$store.commit(\"setVideoPlayMin\");\n    },\n    closeVideoReview() {\n      this.$message.success(\"视频播放器已关闭\");\n      this.$store.commit(\"setPlaying\", false);\n      this.$store.commit(\"closeVideoPlay\");\n    },\n    // 已开始播放回调\n    onPlayerPlaying() {\n      this.$store.commit(\"setPlaying\", true);\n    },\n    // 视频播完回调\n    onPlayerEnded() {\n      this.$store.commit(\"setPlaying\", false);\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n@import \"../assets/style/varibles.styl\"\n\n.img-review-wrapper\n  position fixed\n  top 0\n  right 0\n  bottom 0\n  left 0\n  overflow auto\n  width 100%\n  height 100%\n  z-index 2010\n  text-align center\n  display flex\n  align-items center\n  animation imgReviewAnimation 0.3s\n  -webkit-animation imgReviewAnimation 0.3s /* Safari and Chrome */\n  animation-iteration-count 0.3\n  -webkit-animation-iteration-count 0.3\n  animation-fill-mode forwards\n  -webkit-animation-fill-mode forwards /* Safari 和 Chrome */\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n\n  .tip-wrapper\n    position fixed\n    top 0\n    left 0\n    z-index 2011\n    background rgba(0, 0, 0, 0.5)\n    padding 0 48px\n    width 100%\n    height 48px\n    line-height 48px\n    color #fff\n    font-size 16px\n    display flex\n    justify-content space-between\n\n    .name\n      flex 1\n      padding-right 16px\n      text-align left\n      overflow hidden\n      text-overflow ellipsis\n      white-space nowrap\n\n    .tool-wrapper\n      flex 1\n      display flex\n      justify-content flex-end\n\n      .item\n        margin-left 16px\n        cursor pointer\n\n        &:hover\n          opacity 0.7\n\n      .el-icon-refresh-right\n        line-height 48px\n        font-size 18px\n\n      .download-link\n        color inherit\n        font-size 18px\n\n      .text-wrapper\n        margin-left 32px\n\n        .text\n          margin-right 8px\n\n\n  .my-player\n    width 75%\n    height 75%\n    display flex\n    align-items center\n    margin 0 auto\n</style>\n"]}]}