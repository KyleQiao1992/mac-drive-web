{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/components/ImgReview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/components/ImgReview.vue","mtime":1701827905859},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW1nUmV2aWV3IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm90YXRlOiAwLCAvLyAg5peL6L2s6KeS5bqmCiAgICAgIGFjdGl2ZUluZGV4OiAwLCAvLyAg5b2T5YmN5Zu+54mH57Si5byVIOS7jiAwIOW8gOWniwogICAgICBpbWdab29tOiA0MCwgLy8gIOWbvueJh+e8qeaUvuavlOS+iwogICAgICBpbWdab29tTWluOiAxLCAvLyAg5Zu+54mH57yp5pS+5pyA5bCP5q+U5L6LCiAgICAgIGltZ1pvb21NYXg6IDIwMCwgLy8gIOWbvueJh+e8qeaUvuacgOWkp+avlOS+iwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDlm77niYfmn6XnnIvnu4Tku7bmmK/lkKbmmL7npLoKICAgIGltZ1Jldmlld1Zpc2libGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdSZXZpZXcuaW1nUmV2aWV3VmlzaWJsZTsKICAgIH0sCiAgICAvLyDlm77niYfkv6Hmga/liJfooagKICAgIGltZ1Jldmlld0xpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdSZXZpZXcuaW1nUmV2aWV3TGlzdDsKICAgIH0sCiAgICAvLyDpu5jorqTmmL7npLrnmoTlm77niYfntKLlvJUg5LuOIDAg5byA5aeLCiAgICBkZWZhdWx0QWN0aXZlSW5kZXgoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdSZXZpZXcuZGVmYXVsdEFjdGl2ZUluZGV4OwogICAgfSwKICAgIC8vIOW9k+WJjeaYvuekuueahOWbvueJh+WQjeensAogICAgYWN0aXZlRmlsZU5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmltZ1Jldmlld0xpc3RbdGhpcy5hY3RpdmVJbmRleF0uZmlsZU5hbWU7CiAgICB9LAogICAgLy8g5b2T5YmN5pi+56S655qE5Zu+54mH5omp5bGV5ZCNCiAgICBhY3RpdmVFeHRlbmROYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5pbWdSZXZpZXdMaXN0W3RoaXMuYWN0aXZlSW5kZXhdLmV4dGVuZE5hbWU7CiAgICB9LAogICAgLy8g5a+555So5oi36ICM6KiAIOaYvuekuueahOWbvueJh+e0ouW8lSDku44gMSDlvIDlp4sg6aG26YOo5qCP6L6T5YWl5qGG5o6n5Yi25q2k5YC85Y+Y5YyWCiAgICBpbnB1dEFjdGl2ZUluZGV4OiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVJbmRleCArIDE7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSB2YWx1ZSAtIDE7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlvZPliY3mmL7npLrnmoTlm77niYfkuIvovb3pk77mjqUKICAgIGFjdGl2ZURvd25sb2FkTGluaygpIHsKICAgICAgcmV0dXJuIHRoaXMuaW1nUmV2aWV3TGlzdFt0aGlzLmFjdGl2ZUluZGV4XS5kb3dubG9hZExpbms7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCsIOWbvueJh+e0ouW8leWPmOWMlgogICAgYWN0aXZlSW5kZXgobmV3VmFsdWUpIHsKICAgICAgdGhpcy5yb3RhdGUgPSAwOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuJHJlZnMuaW1nTGFyZ2VbbmV3VmFsdWVdLnN0eWxlLnpvb20pIHsKICAgICAgICAgIHRoaXMuaW1nWm9vbSA9IE51bWJlcigKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbWdMYXJnZVtuZXdWYWx1ZV0uc3R5bGUuem9vbS5zcGxpdCgiJSIpWzBdCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmltZ0xhcmdlW25ld1ZhbHVlXS5zdHlsZS56b29tID0gIjQwJSI7CiAgICAgICAgICB0aGlzLmltZ1pvb20gPSA0MDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8gIOWFs+mXreWbvueJh+mihOiniAogICAgY2xvc2VJbWdSZXZpZXcoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0SW1nUmV2aWV3RGF0YSIsIHsgaW1nUmV2aWV3VmlzaWJsZTogZmFsc2UgfSk7CiAgICAgIHRoaXMucm90YXRlID0gMDsKICAgICAgdGhpcy4kcmVmcy5pbWdMYXJnZVsKICAgICAgICB0aGlzLmFjdGl2ZUluZGV4CiAgICAgIF0uc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3RoaXMucm90YXRlfWRlZylgOwogICAgfSwKICAgIC8vIOagvOW8j+WMlue8qeaUvuaVsOWtlyDmmL7npLrlm77niYfnvKnmlL7mr5TkvosKICAgIGZvcm1hdFpvb20odmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlICsgIiUiOwogICAgfSwKICAgIC8vIOWbvueJh+e8qeaUvuaUueWPmOS6i+S7tgogICAgY2hhbmdlWm9vbSh2YWx1ZSkgewogICAgICBpZiAodGhpcy4kcmVmcy5pbWdMYXJnZSkgewogICAgICAgIHRoaXMuJHJlZnMuaW1nTGFyZ2VbdGhpcy5hY3RpdmVJbmRleF0uc3R5bGUuem9vbSA9IHZhbHVlICsgIiUiOwogICAgICB9CiAgICB9LAogICAgLy8g57yp5pS+5Zu+54mHCiAgICByb2xsSW1nKCkgewogICAgICBsZXQgem9vbSA9CiAgICAgICAgcGFyc2VJbnQodGhpcy4kcmVmcy5pbWdMYXJnZVt0aGlzLmFjdGl2ZUluZGV4XS5zdHlsZS56b29tKSB8fCAxMDA7CiAgICAgIHpvb20gKz0gZXZlbnQud2hlZWxEZWx0YSAvIDEyOwogICAgICBpZiAoem9vbSA+PSB0aGlzLmltZ1pvb21NaW4gJiYgem9vbSA8IHRoaXMuaW1nWm9vbU1heCkgewogICAgICAgIHRoaXMuaW1nWm9vbSA9IHpvb207CiAgICAgICAgdGhpcy4kcmVmcy5pbWdMYXJnZVt0aGlzLmFjdGl2ZUluZGV4XS5zdHlsZS56b29tID0gem9vbSArICIlIjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy8gIOaXi+i9rOWbvueJhwogICAgcm90YXRlSW1nKCkgewogICAgICB0aGlzLnJvdGF0ZSArPSA5MDsKICAgICAgdGhpcy4kcmVmcy5pbWdMYXJnZVsKICAgICAgICB0aGlzLmFjdGl2ZUluZGV4CiAgICAgIF0uc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3RoaXMucm90YXRlfWRlZylgOwogICAgfSwKICAgIHJvdGF0ZUxlZnRJbWcoKSB7CiAgICAgIHRoaXMucm90YXRlIC09IDkwOwogICAgICB0aGlzLiRyZWZzLmltZ0xhcmdlWwogICAgICAgIHRoaXMuYWN0aXZlSW5kZXgKICAgICAgXS5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlKCR7dGhpcy5yb3RhdGV9ZGVnKWA7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["ImgReview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImgReview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    class=\"img-review-wrapper\"\n    v-show=\"imgReviewVisible\"\n    @click.self=\"closeImgReview\"\n    @mousewheel.prevent=\"rollImg()\"\n  >\n    <!-- 顶部信息栏 & 工具栏 -->\n    <div class=\"tip-wrapper\" v-if=\"imgReviewVisible\">\n      <div class=\"name\" :title=\"activeFileName + activeExtendName\">\n        {{ activeFileName }}.{{ activeExtendName }}\n      </div>\n      <div class=\"opera-btn-group\">\n        <el-input-number\n          v-model=\"inputActiveIndex\"\n          :min=\"1\"\n          :max=\"imgReviewList.length\"\n          size=\"mini\"\n        ></el-input-number>\n        <span class=\"split-line\">/</span>{{ imgReviewList.length }}\n      </div>\n      <div class=\"tool-wrapper\">\n        <i\n          class=\"item el-icon-refresh-left\"\n          title=\"向左旋转\"\n          @click=\"rotateLeftImg\"\n        ></i>\n        <i\n          class=\"item el-icon-refresh-right\"\n          title=\"向右旋转\"\n          @click=\"rotateImg\"\n        ></i>\n        <a\n          class=\"item download-link\"\n          target=\"_blank\"\n          :href=\"activeDownloadLink\"\n          :download=\"activeFileName + '.' + activeExtendName\"\n        >\n          <i class=\"el-icon-download\" title=\"保存到本地\"></i>\n        </a>\n      </div>\n    </div>\n    <!-- 大图查看 -->\n    <img\n      class=\"img-large\"\n      ref=\"imgLarge\"\n      v-for=\"(item, index) in imgReviewList\"\n      :key=\"index\"\n      :src=\"item.fileUrl\"\n      v-show=\"index === activeIndex\"\n    />\n    <!-- 左右切换图标 -->\n    <i\n      class=\"pre-icon el-icon-arrow-left\"\n      title=\"上一张\"\n      v-show=\"activeIndex > 0\"\n      @click.stop=\"activeIndex--\"\n    ></i>\n    <i\n      class=\"next-icon el-icon-arrow-right\"\n      title=\"下一张\"\n      v-show=\"activeIndex < imgReviewList.length - 1\"\n      @click.stop=\"activeIndex++\"\n    ></i>\n    <!-- 底部显示放大缩小比例 -->\n    <div class=\"zoom-bar\">\n      <el-slider\n        v-model=\"imgZoom\"\n        :min=\"imgZoomMin\"\n        :max=\"imgZoomMax\"\n        :format-tooltip=\"formatZoom\"\n        @input=\"changeZoom\"\n      ></el-slider>\n      <div class=\"zoom-count\">{{ imgZoom }}%</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ImgReview\",\n  data() {\n    return {\n      rotate: 0, //  旋转角度\n      activeIndex: 0, //  当前图片索引 从 0 开始\n      imgZoom: 40, //  图片缩放比例\n      imgZoomMin: 1, //  图片缩放最小比例\n      imgZoomMax: 200, //  图片缩放最大比例\n    };\n  },\n  computed: {\n    // 图片查看组件是否显示\n    imgReviewVisible() {\n      return this.$store.state.imgReview.imgReviewVisible;\n    },\n    // 图片信息列表\n    imgReviewList() {\n      return this.$store.state.imgReview.imgReviewList;\n    },\n    // 默认显示的图片索引 从 0 开始\n    defaultActiveIndex() {\n      return this.$store.state.imgReview.defaultActiveIndex;\n    },\n    // 当前显示的图片名称\n    activeFileName() {\n      return this.imgReviewList[this.activeIndex].fileName;\n    },\n    // 当前显示的图片扩展名\n    activeExtendName() {\n      return this.imgReviewList[this.activeIndex].extendName;\n    },\n    // 对用户而言 显示的图片索引 从 1 开始 顶部栏输入框控制此值变化\n    inputActiveIndex: {\n      get() {\n        return this.activeIndex + 1;\n      },\n      set(value) {\n        this.activeIndex = value - 1;\n      }\n    },\n    // 当前显示的图片下载链接\n    activeDownloadLink() {\n      return this.imgReviewList[this.activeIndex].downloadLink;\n    }\n  },\n  watch: {\n    // 监听 图片索引变化\n    activeIndex(newValue) {\n      this.rotate = 0;\n      this.$nextTick(() => {\n        if (this.$refs.imgLarge[newValue].style.zoom) {\n          this.imgZoom = Number(\n            this.$refs.imgLarge[newValue].style.zoom.split(\"%\")[0]\n          );\n        } else {\n          this.$refs.imgLarge[newValue].style.zoom = \"40%\";\n          this.imgZoom = 40;\n        }\n      });\n    }\n  },\n  methods: {\n    //  关闭图片预览\n    closeImgReview() {\n      this.$store.commit(\"setImgReviewData\", { imgReviewVisible: false });\n      this.rotate = 0;\n      this.$refs.imgLarge[\n        this.activeIndex\n      ].style.transform = `rotate(${this.rotate}deg)`;\n    },\n    // 格式化缩放数字 显示图片缩放比例\n    formatZoom(value) {\n      return value + \"%\";\n    },\n    // 图片缩放改变事件\n    changeZoom(value) {\n      if (this.$refs.imgLarge) {\n        this.$refs.imgLarge[this.activeIndex].style.zoom = value + \"%\";\n      }\n    },\n    // 缩放图片\n    rollImg() {\n      let zoom =\n        parseInt(this.$refs.imgLarge[this.activeIndex].style.zoom) || 100;\n      zoom += event.wheelDelta / 12;\n      if (zoom >= this.imgZoomMin && zoom < this.imgZoomMax) {\n        this.imgZoom = zoom;\n        this.$refs.imgLarge[this.activeIndex].style.zoom = zoom + \"%\";\n      }\n      return false;\n    },\n    //  旋转图片\n    rotateImg() {\n      this.rotate += 90;\n      this.$refs.imgLarge[\n        this.activeIndex\n      ].style.transform = `rotate(${this.rotate}deg)`;\n    },\n    rotateLeftImg() {\n      this.rotate -= 90;\n      this.$refs.imgLarge[\n        this.activeIndex\n      ].style.transform = `rotate(${this.rotate}deg)`;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '~@/assets/style/mixins.styl';\n\n.img-review-wrapper {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 2010;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  animation: imgReviewAnimation 0.3s;\n  -webkit-animation: imgReviewAnimation 0.3s; /* Safari and Chrome */\n  animation-iteration-count: 0.3;\n  -webkit-animation-iteration-count: 0.3;\n  animation-fill-mode: forwards;\n  -webkit-animation-fill-mode: forwards; /* Safari 和 Chrome */\n\n  @keyframes imgReviewAnimation {\n    0% {\n      background: transparent;\n    }\n\n    100% {\n      background: rgba(0, 0, 0, 0.8);\n    }\n  }\n\n  @keyframes imgReviewAnimation {\n    0% {\n      background: transparent;\n    }\n\n    100% {\n      background: rgba(0, 0, 0, 0.8);\n    }\n  }\n\n  .tip-wrapper {\n    box-sizing: border-box;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 2011;\n    background: rgba(0, 0, 0, 0.5);\n    padding: 0 48px;\n    width: 100%;\n    height: 48px;\n    line-height: 48px;\n    color: #fff;\n    font-size: 16px;\n    display: flex;\n    justify-content: space-between;\n\n    .name {\n      flex: 1;\n      padding-right: 16px;\n      text-align: left;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .opera-btn-group {\n      width: 100px;\n      display: flex;\n\n      >>> .el-input-number {\n        width: 40px;\n\n        .el-input-number__decrease, .el-input-number__increase {\n          display: none;\n        }\n\n        .el-input__inner {\n          margin-top: 14px;\n          background: rgba(0, 0, 0, 0.5);\n          height: 20px;\n          line-height: 20px;\n          padding: 0;\n          font-size: 16px;\n          color: #fff;\n        }\n      }\n\n      .split-line {\n        margin: 0 8px;\n      }\n    }\n\n    .tool-wrapper {\n      flex: 1;\n      display: flex;\n      justify-content: flex-end;\n\n      .item {\n        margin-left: 16px;\n        cursor: pointer;\n\n        &:hover {\n          opacity: 0.7;\n        }\n      }\n\n      .el-icon-refresh-right {\n        line-height: 48px;\n        font-size: 18px;\n      }\n\n      .el-icon-refresh-left {\n        line-height: 48px;\n        font-size: 18px;\n      }\n\n      .download-link {\n        color: inherit;\n        font-size: 18px;\n      }\n\n      .text-wrapper {\n        margin-left: 32px;\n\n        .text {\n          margin-right: 8px;\n        }\n      }\n    }\n  }\n\n  .img-large {\n    margin: 0 auto;\n    transition: transform 0.5s;\n    -webkit-transition: transform 0.5s; /* Safari */\n  }\n\n  .pre-icon, .next-icon {\n    font-size: 60px;\n    color: #fff;\n    position: fixed;\n    top: 50%;\n    cursor: pointer;\n\n    &:hover {\n      opacity: 0.7;\n    }\n  }\n\n  .pre-icon {\n    left: 64px;\n  }\n\n  .next-icon {\n    right: 64px;\n  }\n\n  .zoom-bar {\n    position: fixed;\n    right: 0;\n    bottom: 20px;\n    left: 0;\n    margin: 0 auto;\n    width: 600px;\n    display: flex;\n\n    >>> .el-slider {\n      flex: 1;\n\n      .el-slider__bar {\n        background: $PrimaryText;\n      }\n\n      .el-slider__button {\n        border-color: $PrimaryText;\n      }\n    }\n\n    .zoom-count {\n      width: 60px;\n      height: 38px;\n      line-height: 38px;\n      text-align: right;\n      color: #fff;\n    }\n  }\n}\n</style>\n"]}]}