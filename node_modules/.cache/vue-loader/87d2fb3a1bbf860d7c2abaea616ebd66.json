{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/views/userinfo/AdminInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/views/userinfo/AdminInfo.vue","mtime":1701827905866},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkbWluSW5mbyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW5TdHIiKQogICAgICB9LAogICAgICBpbWFnZVVybDogIiIsCiAgICAgIGFkbWluOiB7fSwKICAgICAgdXBkYXRlQWRtaW46IHt9LAogICAgICB1cGRhdGVQYXNzd29yZDogewogICAgICAgIG9sZFBhc3N3b3JkOiAiIiwKICAgICAgICBuZXdQYXNzd29yZDogIiIsCiAgICAgICAgYWdQYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgVXNlckRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBVc2VyUGFzc3dvcmQ6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pi156ewIiwgdHJpZ2dlcjogImNoYW5nZSIgfV0KICAgICAgfSwKICAgICAgcnVsZXNQYXNzd29yZDogewogICAgICAgIG9sZFBhc3N3b3JkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWOn+WvhueggSIgfV0sCiAgICAgICAgbmV3UGFzc3dvcmQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5paw5a+G56CBIiB9XSwKICAgICAgICBhZ1Bhc3N3b3JkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+WGjeasoeWvhueggSIgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEFkbWluSW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/liJ3lp4vljJbmlbDmja4KICAgIGdldEFkbWluSW5mbygpIHsKICAgICAgYXhpb3MuZ2V0KCIvYXBpL2FkbWluL2luZm8iKS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICB0aGlzLmFkbWluID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5L+u5pS555So5oi35L+h5oGvCiAgICBoYW5kbGVFZGl0KCkgewogICAgICBheGlvcy5nZXQoIi9hcGkvYWRtaW4vaW5mbyIpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIHRoaXMudXBkYXRlQWRtaW4gPSByZXNwOwogICAgICAgICAgdGhpcy5Vc2VyRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+aPkOS6pOeUqOaIt+S/oeaBrwogICAgdXNlckRpYWxvZ1N1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBheGlvcy5wdXQoIi9hcGkvYWRtaW4vdXBkYXRlIiwgdGhpcy51cGRhdGVBZG1pbikudGhlbihyZXNwID0+IHsKICAgICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgICB0aGlzLlVzZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5nZXRBZG1pbkluZm8oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv67mlLnlr4bnoIHnqpflj6MKICAgIHVwZGF0ZVB3ZCgpIHsKICAgICAgdGhpcy5Vc2VyUGFzc3dvcmQgPSB0cnVlOwogICAgfSwKICAgIC8v5o+Q5Lqk5L+u5pS55a+G56CBCiAgICBVcGRhdGVQYXNzd29yZEJ1dHRvbigpIHsKICAgICAgYXhpb3MKICAgICAgICAucHV0KAogICAgICAgICAgIi9hcGkvYWRtaW4vdXBQYXNzd29yZD9vbGRQYXNzd29yZD0iICsKICAgICAgICAgICAgdGhpcy51cGRhdGVQYXNzd29yZC5vbGRQYXNzd29yZCArCiAgICAgICAgICAgICImcGFzc3dvcmQ9IiArCiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmQubmV3UGFzc3dvcmQKICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5Vc2VyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmdldEFkbWluSW5mbygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIC8v5o+Q5Lqk5Zu+54mH5oiQ5YqfCiAgICBvblN1Y2Nlc3MoKSB7CiAgICAgIHRoaXMuZ2V0QWRtaW5JbmZvKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["AdminInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminInfo.vue","sourceRoot":"src/views/userinfo","sourcesContent":["<template>\n  <!--个人中心-->\n  <div style=\"overflow:hidden;\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>{{ admin.name }}</span\n        ><span style=\"font-size: 12px;color: #808080;margin-left: 10px\"\n          >({{ admin.username }})</span\n        >\n        <el-button\n          @click=\"handleEdit\"\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          icon=\"el-icon-edit\"\n          title=\"编辑\"\n        ></el-button>\n      </div>\n      <div>\n        <!--用户头像-->\n        <div class=\"user_avatar\">\n          <el-upload\n            action=\"/admin/upUserFace\"\n            :headers=\"headers\"\n            :show-file-list=\"true\"\n            :on-success=\"onSuccess\"\n          >\n            <el-avatar\n              :size=\"85\"\n              :src=\"admin.userFace\"\n              title=\"点击修改用户头像\"\n            >\n              <img :src=\"admin.userFace\" class=\"user_face\" />\n            </el-avatar>\n          </el-upload>\n        </div>\n\n        <!--用户详细信息-->\n        <ul class=\"user_info_ul\">\n          <li>\n            昵称：<el-tag size=\"small\">{{ admin.name }}</el-tag>\n          </li>\n          <li>\n            邮箱：<el-tag size=\"small\">{{ admin.email }}</el-tag>\n          </li>\n          <li>\n            存储大小：<el-tag size=\"small\">{{ admin.disksize }}G</el-tag>\n          </li>\n        </ul>\n      </div>\n      <el-button\n        @click=\"updatePwd\"\n        type=\"danger\"\n        size=\"small\"\n        style=\"float: right\"\n        >修改密码</el-button\n      >\n    </el-card>\n\n    <!--修改用户信息对话框-->\n    <el-dialog\n      title=\"编辑用户信息\"\n      :visible.sync=\"UserDialogVisible\"\n      width=\"30%\"\n    >\n      <div>\n        <el-form\n          :model=\"updateAdmin\"\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"账户:\" prop=\"username\">\n            <el-input\n              v-model=\"updateAdmin.username\"\n              size=\"small\"\n              disabled=\"disabled\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"昵称:\" prop=\"name\">\n            <el-input v-model=\"updateAdmin.name\" size=\"small\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱:\" prop=\"age\">\n            <el-input\n              v-model=\"updateAdmin.email\"\n              size=\"small\"\n              disabled=\"disabled\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"UserDialogVisible = false\" size=\"small\"\n          >取 消</el-button\n        >\n        <el-button type=\"primary\" @click=\"userDialogSubmit\" size=\"small\"\n          >确 定</el-button\n        >\n      </span>\n    </el-dialog>\n\n    <!--修改用户密码对话框-->\n    <el-dialog title=\"修改密码\" :visible.sync=\"UserPassword\" width=\"30%\">\n      <div>\n        <el-form\n          :model=\"updatePassword\"\n          :rules=\"rulesPassword\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"原密码:\" prop=\"oldPassword\" type=\"password\">\n            <el-input\n              v-model=\"updatePassword.oldPassword\"\n              type=\"password\"\n              size=\"small\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"新密码:\" prop=\"newPassword\" type=\"password\">\n            <el-input\n              v-model=\"updatePassword.newPassword\"\n              type=\"password\"\n              size=\"small\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"再次:\" prop=\"agPassword\" type=\"password\">\n            <el-input\n              size=\"small\"\n              v-model=\"updatePassword.agPassword\"\n              type=\"password\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"UpdatePasswordButton\" size=\"small\"\n          >确 定</el-button\n        >\n        <el-button @click=\"UserPassword = false\" size=\"small\">取 消</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AdminInfo\",\n  data() {\n    return {\n      headers: {\n        Authorization: window.sessionStorage.getItem(\"tokenStr\")\n      },\n      imageUrl: \"\",\n      admin: {},\n      updateAdmin: {},\n      updatePassword: {\n        oldPassword: \"\",\n        newPassword: \"\",\n        agPassword: \"\"\n      },\n      UserDialogVisible: false,\n      UserPassword: false,\n      rules: {\n        name: [{ required: true, message: \"请输入昵称\", trigger: \"change\" }]\n      },\n      rulesPassword: {\n        oldPassword: [{ required: true, message: \"请输入原密码\" }],\n        newPassword: [{ required: true, message: \"请输入新密码\" }],\n        agPassword: [{ required: true, message: \"请再次密码\" }]\n      }\n    };\n  },\n  mounted() {\n    this.getAdminInfo();\n  },\n  methods: {\n    //初始化数据\n    getAdminInfo() {\n      axios.get(\"/api/admin/info\").then(resp => {\n        if (resp) {\n          this.admin = resp;\n        }\n      });\n    },\n    //修改用户信息\n    handleEdit() {\n      axios.get(\"/api/admin/info\").then(resp => {\n        if (resp) {\n          this.updateAdmin = resp;\n          this.UserDialogVisible = true;\n        }\n      });\n    },\n    //提交用户信息\n    userDialogSubmit() {\n      this.$refs[\"ruleForm\"].validate(valid => {\n        if (valid) {\n          axios.put(\"/api/admin/update\", this.updateAdmin).then(resp => {\n            if (resp) {\n              this.UserDialogVisible = false;\n              this.getAdminInfo();\n            }\n          });\n        }\n      });\n    },\n    // 修改密码窗口\n    updatePwd() {\n      this.UserPassword = true;\n    },\n    //提交修改密码\n    UpdatePasswordButton() {\n      axios\n        .put(\n          \"/api/admin/upPassword?oldPassword=\" +\n            this.updatePassword.oldPassword +\n            \"&password=\" +\n            this.updatePassword.newPassword\n        )\n        .then(resp => {\n          if (resp.code === 200) {\n            this.UserDialogVisible = false;\n            this.getAdminInfo();\n          }\n        });\n    },\n    //提交图片成功\n    onSuccess() {\n      this.getAdminInfo();\n    }\n  }\n};\n</script>\n\n<style scoped>\n/*用户信息卡片*/\n.box-card {\n  width: 600px;\n  margin: 30px auto;\n  padding: 10px;\n}\n\n/*展示用户具体信息ul*/\n.user_info_ul {\n  list-style: none;\n}\n.user_info_ul li {\n  margin-bottom: 20px;\n}\n\n.user_avatar {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n}\n/*用户头像*/\n.user_face {\n}\n</style>\n"]}]}