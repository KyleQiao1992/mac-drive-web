{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js!/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/components/VideoPlayer.vue","mtime":1701827905859},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdmlkZW9QbGF5ZXIgfSBmcm9tICJ2dWUtdmlkZW8tcGxheWVyIjsKaW1wb3J0ICJ2aWRlby5qcy9kaXN0L3ZpZGVvLWpzLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVmlkZW9QbGF5ZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGF5ZXJPcHRpb25zOiB7CiAgICAgICAgcGxheWJhY2tSYXRlczogWzAuNSwgMS4wLCAxLjUsIDIuMCwgMi41XSwKICAgICAgICAvLyDlj6/pgInnmoTmkq3mlL7pgJ/luqYKICAgICAgICBhdXRvcGxheTogdHJ1ZSwKICAgICAgICAvLyDlpoLmnpzkuLp0cnVlLOa1j+iniOWZqOWHhuWkh+WlveaXtuW8gOWni+WbnuaUvuOAggogICAgICAgIG11dGVkOiBmYWxzZSwKICAgICAgICAvLyDpu5jorqTmg4XlhrXkuIvlsIbkvJrmtojpmaTku7vkvZXpn7PpopHjgIIKICAgICAgICBsb29wOiBmYWxzZSwKICAgICAgICAvLyDmmK/lkKbop4bpopHkuIDnu5PmnZ/lsLHph43mlrDlvIDlp4vjgIIKICAgICAgICBwcmVsb2FkOiAiYXV0byIsCiAgICAgICAgLy8g5bu66K6u5rWP6KeI5Zmo5ZyoPHZpZGVvPuWKoOi9veWFg+e0oOWQjuaYr+WQpuW6lOivpeW8gOWni+S4i+i9veinhumikeaVsOaNruOAgmF1dG/mtY/op4jlmajpgInmi6nmnIDkvbPooYzkuLos56uL5Y2z5byA5aeL5Yqg6L296KeG6aKR77yI5aaC5p6c5rWP6KeI5Zmo5pSv5oyB77yJCiAgICAgICAgbGFuZ3VhZ2U6ICJ6aC1DTiIsCiAgICAgICAgLy8gYXNwZWN0UmF0aW86ICcxNjo5JywgLy8g5bCG5pKt5pS+5Zmo572u5LqO5rWB55WF5qih5byP77yM5bm25Zyo6K6h566X5pKt5pS+5Zmo55qE5Yqo5oCB5aSn5bCP5pe25L2/55So6K+l5YC844CC5YC85bqU6K+l5Luj6KGo5LiA5Liq5q+U5L6LIC0g55So5YaS5Y+35YiG6ZqU55qE5Lik5Liq5pWw5a2X77yI5L6L5aaCIjE2Ojki5oiWIjQ6MyLvvIkKICAgICAgICBmbHVpZDogdHJ1ZSwKICAgICAgICAvLyDlvZN0cnVl5pe277yMVmlkZW8uanMgcGxheWVy5bCG5oul5pyJ5rWB5L2T5aSn5bCP44CC5o2i5Y+l6K+d6K+077yM5a6D5bCG5oyJ5q+U5L6L57yp5pS+5Lul6YCC5bqU5YW25a655Zmo44CCCiAgICAgICAgc291cmNlczogW10sCiAgICAgICAgcG9zdGVyOiAiIiwKICAgICAgICAvLyDlsIHpnaLlnLDlnYAKICAgICAgICBub3RTdXBwb3J0ZWRNZXNzYWdlOiAi5q2k6KeG6aKR5pqC5peg5rOV5pKt5pS+77yM6K+356iN5ZCO5YaN6K+VIiwKICAgICAgICAvLyDlhYHorrjopobnm5ZWaWRlby5qc+aXoOazleaSreaUvuWqkuS9k+a6kOaXtuaYvuekuueahOm7mOiupOS/oeaBr+OAggogICAgICAgIGNvbnRyb2xCYXI6IHsKICAgICAgICAgIHRpbWVEaXZpZGVyOiB0cnVlLAogICAgICAgICAgLy8g5b2T5YmN5pe26Ze05ZKM5oyB57ut5pe26Ze055qE5YiG6ZqU56ymCiAgICAgICAgICBkdXJhdGlvbkRpc3BsYXk6IHRydWUsCiAgICAgICAgICAvLyDmmL7npLrmjIHnu63ml7bpl7QKICAgICAgICAgIHJlbWFpbmluZ1RpbWVEaXNwbGF5OiB0cnVlLAogICAgICAgICAgLy8g5piv5ZCm5pi+56S65Ymp5L2Z5pe26Ze05Yqf6IO9CiAgICAgICAgICBmdWxsc2NyZWVuVG9nZ2xlOiB0cnVlIC8vIOaYr+WQpuaYvuekuuWFqOWxj+aMiemSrgoKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICB2aWRlb1BsYXllcjogdmlkZW9QbGF5ZXIKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2aXNpYmxlOiBmdW5jdGlvbiB2aXNpYmxlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucGxheWVyLnZpZGVvUGxheWVyLnZpc2libGU7CiAgICB9LAogICAgZmlsZW5hbWU6IGZ1bmN0aW9uIGZpbGVuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucGxheWVyLnZpZGVvUGxheWVyLmZpbGVuYW1lOwogICAgfSwKICAgIHVybDogZnVuY3Rpb24gdXJsKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucGxheWVyLnZpZGVvUGxheWVyLnVybDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKwg5Zu+54mH5p+l55yL57uE5Lu2IOaYvumakOeKtuaAgeWPmOWMlgogICAgdmlzaWJsZTogZnVuY3Rpb24gdmlzaWJsZSh2YWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpOwoKICAgICAgaWYgKHZhbCkgewogICAgICAgIC8vIOaMguWcqGJvZHnkuIvvvIzpmLLmraLnu4Tku7blhYPntKDmnInmoLflvI90cmFuc2Zvcm3ogIzkvb9wb3NpdGlvbjogZml4ZWTlpLHmlYgKICAgICAgICBib2R5LmFwcGVuZENoaWxkKHRoaXMuJGVsKTsKICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7IC8vIOa3u+WKoOmUruebmEVzY+S6i+S7tgoKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7CiAgICAgICAgICAgICAgX3RoaXMuY2xvc2VWaWRlb1JldmlldygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gImF1dG8iOwogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXVwIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7CiAgICAgICAgICAgIF90aGlzLmNsb3NlVmlkZW9SZXZpZXcoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHVybDogZnVuY3Rpb24gdXJsKCkgewogICAgICB0aGlzLnBsYXllck9wdGlvbnMuc291cmNlcyA9IFt7CiAgICAgICAgc3JjOiB0aGlzLnVybCwKICAgICAgICB0eXBlOiAidmlkZW8vd2VibSIKICAgICAgfV07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyAg5pyA5bCP5YyWCiAgICBtaW5WaWRlb1JldmlldzogZnVuY3Rpb24gbWluVmlkZW9SZXZpZXcoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh0aGlzLmZpbGVuYW1lICsgIuato+WcqOWQjuWPsOaSreaUviIpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFZpZGVvUGxheU1pbiIpOwogICAgfSwKICAgIGNsb3NlVmlkZW9SZXZpZXc6IGZ1bmN0aW9uIGNsb3NlVmlkZW9SZXZpZXcoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6KeG6aKR5pKt5pS+5Zmo5bey5YWz6ZetIik7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0UGxheWluZyIsIGZhbHNlKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjbG9zZVZpZGVvUGxheSIpOwogICAgfSwKICAgIC8vIOW3suW8gOWni+aSreaUvuWbnuiwgwogICAgb25QbGF5ZXJQbGF5aW5nOiBmdW5jdGlvbiBvblBsYXllclBsYXlpbmcoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0UGxheWluZyIsIHRydWUpOwogICAgfSwKICAgIC8vIOinhumikeaSreWujOWbnuiwgwogICAgb25QbGF5ZXJFbmRlZDogZnVuY3Rpb24gb25QbGF5ZXJFbmRlZCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRQbGF5aW5nIiwgZmFsc2UpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"img-review-wrapper\" v-show=\"visible\" @click.self=\"minVideoReview\">\n    <!-- 顶部信息栏 & 工具栏 -->\n    <div class=\"tip-wrapper\">\n      <div class=\"name\" :title=\"filename\" v-text=\"filename\"></div>\n      <div class=\"tool-wrapper\">\n        <i\n          class=\"item el-icon-refresh-right el-icon-circle-close\"\n          style=\"padding-right: 20px\"\n          title=\"关闭视频\"\n          @click=\"closeVideoReview()\"\n        ></i>\n        <a\n          class=\"item download-link\"\n          target=\"_blank\"\n          :href=\"url\"\n          :download=\"filename\"\n        >\n          <i class=\"el-icon-download\" title=\"保存到本地\"></i>\n        </a>\n      </div>\n    </div>\n    <!-- 视频查看 -->\n    <video-player\n      class=\"my-player\"\n      ref=\"videoPlayer\"\n      :playsinline=\"false\"\n      @playing=\"onPlayerPlaying($event)\"\n      @ended=\"onPlayerEnded($event)\"\n      :options=\"playerOptions\"\n    >\n    </video-player>\n  </div>\n</template>\n\n<script>\nimport { videoPlayer } from \"vue-video-player\";\nimport \"video.js/dist/video-js.css\";\n\nexport default {\n  name: \"VideoPlayer\",\n  data() {\n    return {\n      playerOptions: {\n        playbackRates: [0.5, 1.0, 1.5, 2.0, 2.5], // 可选的播放速度\n        autoplay: true, // 如果为true,浏览器准备好时开始回放。\n        muted: false, // 默认情况下将会消除任何音频。\n        loop: false, // 是否视频一结束就重新开始。\n        preload: \"auto\", // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: \"zh-CN\",\n        // aspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        fluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n        sources: [],\n        poster: \"\", // 封面地址\n        notSupportedMessage: \"此视频暂无法播放，请稍后再试\", // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\n        controlBar: {\n          timeDivider: true, // 当前时间和持续时间的分隔符\n          durationDisplay: true, // 显示持续时间\n          remainingTimeDisplay: true, // 是否显示剩余时间功能\n          fullscreenToggle: true // 是否显示全屏按钮\n        }\n      }\n    };\n  },\n  components: {\n    videoPlayer\n  },\n  computed: {\n    visible() {\n      return this.$store.state.player.videoPlayer.visible;\n    },\n    filename() {\n      return this.$store.state.player.videoPlayer.filename;\n    },\n    url() {\n      return this.$store.state.player.videoPlayer.url;\n    }\n  },\n  watch: {\n    // 监听 图片查看组件 显隐状态变化\n    visible(val) {\n      let body = document.querySelector(\"body\");\n      if (val) {\n        // 挂在body下，防止组件元素有样式transform而使position: fixed失效\n        body.appendChild(this.$el);\n        body.style.overflow = \"hidden\";\n        // 添加键盘Esc事件\n        this.$nextTick(() => {\n          document.addEventListener(\"keyup\", e => {\n            if (e.keyCode === 27) {\n              this.closeVideoReview();\n            }\n          });\n        });\n      } else {\n        body.style.overflow = \"auto\";\n        document.removeEventListener(\"keyup\", e => {\n          if (e.keyCode === 27) {\n            this.closeVideoReview();\n          }\n        });\n      }\n    },\n    url() {\n      this.playerOptions.sources = [{ src: this.url, type: \"video/webm\" }];\n    }\n  },\n  methods: {\n    //  最小化\n    minVideoReview() {\n      this.$message.success(this.filename + \"正在后台播放\");\n      this.$store.commit(\"setVideoPlayMin\");\n    },\n    closeVideoReview() {\n      this.$message.success(\"视频播放器已关闭\");\n      this.$store.commit(\"setPlaying\", false);\n      this.$store.commit(\"closeVideoPlay\");\n    },\n    // 已开始播放回调\n    onPlayerPlaying() {\n      this.$store.commit(\"setPlaying\", true);\n    },\n    // 视频播完回调\n    onPlayerEnded() {\n      this.$store.commit(\"setPlaying\", false);\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n@import \"../assets/style/varibles.styl\"\n\n.img-review-wrapper\n  position fixed\n  top 0\n  right 0\n  bottom 0\n  left 0\n  overflow auto\n  width 100%\n  height 100%\n  z-index 2010\n  text-align center\n  display flex\n  align-items center\n  animation imgReviewAnimation 0.3s\n  -webkit-animation imgReviewAnimation 0.3s /* Safari and Chrome */\n  animation-iteration-count 0.3\n  -webkit-animation-iteration-count 0.3\n  animation-fill-mode forwards\n  -webkit-animation-fill-mode forwards /* Safari 和 Chrome */\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n  @keyframes imgReviewAnimation\n    0%\n      background transparent\n    100%\n      background rgba(0, 0, 0, 0.8)\n\n  .tip-wrapper\n    position fixed\n    top 0\n    left 0\n    z-index 2011\n    background rgba(0, 0, 0, 0.5)\n    padding 0 48px\n    width 100%\n    height 48px\n    line-height 48px\n    color #fff\n    font-size 16px\n    display flex\n    justify-content space-between\n\n    .name\n      flex 1\n      padding-right 16px\n      text-align left\n      overflow hidden\n      text-overflow ellipsis\n      white-space nowrap\n\n    .tool-wrapper\n      flex 1\n      display flex\n      justify-content flex-end\n\n      .item\n        margin-left 16px\n        cursor pointer\n\n        &:hover\n          opacity 0.7\n\n      .el-icon-refresh-right\n        line-height 48px\n        font-size 18px\n\n      .download-link\n        color inherit\n        font-size 18px\n\n      .text-wrapper\n        margin-left 32px\n\n        .text\n          margin-right 8px\n\n\n  .my-player\n    width 75%\n    height 75%\n    display flex\n    align-items center\n    margin 0 auto\n</style>\n"],"sourceRoot":"src/components"}]}