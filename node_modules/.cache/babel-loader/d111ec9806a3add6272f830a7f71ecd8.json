{"remainingRequest":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js!/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mttest/Profile/mac-drive-web/src/views/userinfo/AdminInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mttest/Profile/mac-drive-web/src/views/userinfo/AdminInfo.vue","mtime":1701827905866},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mttest/Profile/mac-drive-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZG1pbkluZm8iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuU3RyIikKICAgICAgfSwKICAgICAgaW1hZ2VVcmw6ICIiLAogICAgICBhZG1pbjoge30sCiAgICAgIHVwZGF0ZUFkbWluOiB7fSwKICAgICAgdXBkYXRlUGFzc3dvcmQ6IHsKICAgICAgICBvbGRQYXNzd29yZDogIiIsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLAogICAgICAgIGFnUGFzc3dvcmQ6ICIiCiAgICAgIH0sCiAgICAgIFVzZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgVXNlclBhc3N3b3JkOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5pi156ewIiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcnVsZXNQYXNzd29yZDogewogICAgICAgIG9sZFBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5Y6f5a+G56CBIgogICAgICAgIH1dLAogICAgICAgIG5ld1Bhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5paw5a+G56CBIgogICAgICAgIH1dLAogICAgICAgIGFnUGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7flho3mrKHlr4bnoIEiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEFkbWluSW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/liJ3lp4vljJbmlbDmja4KICAgIGdldEFkbWluSW5mbzogZnVuY3Rpb24gZ2V0QWRtaW5JbmZvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCIvYXBpL2FkbWluL2luZm8iKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIF90aGlzLmFkbWluID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5L+u5pS555So5oi35L+h5oGvCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiL2FwaS9hZG1pbi9pbmZvIikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICBfdGhpczIudXBkYXRlQWRtaW4gPSByZXNwOwogICAgICAgICAgX3RoaXMyLlVzZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5o+Q5Lqk55So5oi35L+h5oGvCiAgICB1c2VyRGlhbG9nU3VibWl0OiBmdW5jdGlvbiB1c2VyRGlhbG9nU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBheGlvcy5wdXQoIi9hcGkvYWRtaW4vdXBkYXRlIiwgX3RoaXMzLnVwZGF0ZUFkbWluKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgICAgX3RoaXMzLlVzZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzMy5nZXRBZG1pbkluZm8oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv67mlLnlr4bnoIHnqpflj6MKICAgIHVwZGF0ZVB3ZDogZnVuY3Rpb24gdXBkYXRlUHdkKCkgewogICAgICB0aGlzLlVzZXJQYXNzd29yZCA9IHRydWU7CiAgICB9LAogICAgLy/mj5DkuqTkv67mlLnlr4bnoIEKICAgIFVwZGF0ZVBhc3N3b3JkQnV0dG9uOiBmdW5jdGlvbiBVcGRhdGVQYXNzd29yZEJ1dHRvbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBheGlvcy5wdXQoIi9hcGkvYWRtaW4vdXBQYXNzd29yZD9vbGRQYXNzd29yZD0iICsgdGhpcy51cGRhdGVQYXNzd29yZC5vbGRQYXNzd29yZCArICImcGFzc3dvcmQ9IiArIHRoaXMudXBkYXRlUGFzc3dvcmQubmV3UGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzNC5Vc2VyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzNC5nZXRBZG1pbkluZm8oKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5o+Q5Lqk5Zu+54mH5oiQ5YqfCiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcygpIHsKICAgICAgdGhpcy5nZXRBZG1pbkluZm8oKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AdminInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!--个人中心-->\n  <div style=\"overflow:hidden;\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>{{ admin.name }}</span\n        ><span style=\"font-size: 12px;color: #808080;margin-left: 10px\"\n          >({{ admin.username }})</span\n        >\n        <el-button\n          @click=\"handleEdit\"\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          icon=\"el-icon-edit\"\n          title=\"编辑\"\n        ></el-button>\n      </div>\n      <div>\n        <!--用户头像-->\n        <div class=\"user_avatar\">\n          <el-upload\n            action=\"/admin/upUserFace\"\n            :headers=\"headers\"\n            :show-file-list=\"true\"\n            :on-success=\"onSuccess\"\n          >\n            <el-avatar\n              :size=\"85\"\n              :src=\"admin.userFace\"\n              title=\"点击修改用户头像\"\n            >\n              <img :src=\"admin.userFace\" class=\"user_face\" />\n            </el-avatar>\n          </el-upload>\n        </div>\n\n        <!--用户详细信息-->\n        <ul class=\"user_info_ul\">\n          <li>\n            昵称：<el-tag size=\"small\">{{ admin.name }}</el-tag>\n          </li>\n          <li>\n            邮箱：<el-tag size=\"small\">{{ admin.email }}</el-tag>\n          </li>\n          <li>\n            存储大小：<el-tag size=\"small\">{{ admin.disksize }}G</el-tag>\n          </li>\n        </ul>\n      </div>\n      <el-button\n        @click=\"updatePwd\"\n        type=\"danger\"\n        size=\"small\"\n        style=\"float: right\"\n        >修改密码</el-button\n      >\n    </el-card>\n\n    <!--修改用户信息对话框-->\n    <el-dialog\n      title=\"编辑用户信息\"\n      :visible.sync=\"UserDialogVisible\"\n      width=\"30%\"\n    >\n      <div>\n        <el-form\n          :model=\"updateAdmin\"\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"账户:\" prop=\"username\">\n            <el-input\n              v-model=\"updateAdmin.username\"\n              size=\"small\"\n              disabled=\"disabled\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"昵称:\" prop=\"name\">\n            <el-input v-model=\"updateAdmin.name\" size=\"small\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱:\" prop=\"age\">\n            <el-input\n              v-model=\"updateAdmin.email\"\n              size=\"small\"\n              disabled=\"disabled\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"UserDialogVisible = false\" size=\"small\"\n          >取 消</el-button\n        >\n        <el-button type=\"primary\" @click=\"userDialogSubmit\" size=\"small\"\n          >确 定</el-button\n        >\n      </span>\n    </el-dialog>\n\n    <!--修改用户密码对话框-->\n    <el-dialog title=\"修改密码\" :visible.sync=\"UserPassword\" width=\"30%\">\n      <div>\n        <el-form\n          :model=\"updatePassword\"\n          :rules=\"rulesPassword\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"原密码:\" prop=\"oldPassword\" type=\"password\">\n            <el-input\n              v-model=\"updatePassword.oldPassword\"\n              type=\"password\"\n              size=\"small\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"新密码:\" prop=\"newPassword\" type=\"password\">\n            <el-input\n              v-model=\"updatePassword.newPassword\"\n              type=\"password\"\n              size=\"small\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"再次:\" prop=\"agPassword\" type=\"password\">\n            <el-input\n              size=\"small\"\n              v-model=\"updatePassword.agPassword\"\n              type=\"password\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"UpdatePasswordButton\" size=\"small\"\n          >确 定</el-button\n        >\n        <el-button @click=\"UserPassword = false\" size=\"small\">取 消</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AdminInfo\",\n  data() {\n    return {\n      headers: {\n        Authorization: window.sessionStorage.getItem(\"tokenStr\")\n      },\n      imageUrl: \"\",\n      admin: {},\n      updateAdmin: {},\n      updatePassword: {\n        oldPassword: \"\",\n        newPassword: \"\",\n        agPassword: \"\"\n      },\n      UserDialogVisible: false,\n      UserPassword: false,\n      rules: {\n        name: [{ required: true, message: \"请输入昵称\", trigger: \"change\" }]\n      },\n      rulesPassword: {\n        oldPassword: [{ required: true, message: \"请输入原密码\" }],\n        newPassword: [{ required: true, message: \"请输入新密码\" }],\n        agPassword: [{ required: true, message: \"请再次密码\" }]\n      }\n    };\n  },\n  mounted() {\n    this.getAdminInfo();\n  },\n  methods: {\n    //初始化数据\n    getAdminInfo() {\n      axios.get(\"/api/admin/info\").then(resp => {\n        if (resp) {\n          this.admin = resp;\n        }\n      });\n    },\n    //修改用户信息\n    handleEdit() {\n      axios.get(\"/api/admin/info\").then(resp => {\n        if (resp) {\n          this.updateAdmin = resp;\n          this.UserDialogVisible = true;\n        }\n      });\n    },\n    //提交用户信息\n    userDialogSubmit() {\n      this.$refs[\"ruleForm\"].validate(valid => {\n        if (valid) {\n          axios.put(\"/api/admin/update\", this.updateAdmin).then(resp => {\n            if (resp) {\n              this.UserDialogVisible = false;\n              this.getAdminInfo();\n            }\n          });\n        }\n      });\n    },\n    // 修改密码窗口\n    updatePwd() {\n      this.UserPassword = true;\n    },\n    //提交修改密码\n    UpdatePasswordButton() {\n      axios\n        .put(\n          \"/api/admin/upPassword?oldPassword=\" +\n            this.updatePassword.oldPassword +\n            \"&password=\" +\n            this.updatePassword.newPassword\n        )\n        .then(resp => {\n          if (resp.code === 200) {\n            this.UserDialogVisible = false;\n            this.getAdminInfo();\n          }\n        });\n    },\n    //提交图片成功\n    onSuccess() {\n      this.getAdminInfo();\n    }\n  }\n};\n</script>\n\n<style scoped>\n/*用户信息卡片*/\n.box-card {\n  width: 600px;\n  margin: 30px auto;\n  padding: 10px;\n}\n\n/*展示用户具体信息ul*/\n.user_info_ul {\n  list-style: none;\n}\n.user_info_ul li {\n  margin-bottom: 20px;\n}\n\n.user_avatar {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n}\n/*用户头像*/\n.user_face {\n}\n</style>\n"],"sourceRoot":"src/views/userinfo"}]}